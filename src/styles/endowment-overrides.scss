/* stylelint-disable no-descending-specificity */
.report-background.wikimedia-endow,
body.single-wmf-report.wikimedia-endow:not(.home) {
	$width-breakpoint-wide: 1440px;

	.entry-header {
		display: none;
	}

	.wp-block-heading {
		margin: 0 0 1rem 0;
	}

	p {
		margin-top: 0;
	}

	.wmf-pattern-endowment-hero__label,
	h2:not([class*="is-style-"]) {
		margin-bottom: 2rem;

		&.wp-block-heading {
			display: inline-block;
			background: #0060fe;
			color: #fff;

			@include base-font;
			text-transform: uppercase;
			font-size: 15px;
			padding: 0.5rem 1rem 0.5rem 1rem;
			margin-bottom: 1rem;
		}
	}

	h2 {

		&::after {
			display: none;
		}
	}

	.alignfull {
		transform: none;
		padding: 0;

		> div {
			max-width: 100%;
			padding: 0;
		}

		.wp-block,
		p {
			max-width: 100%;
		}
	}

	.wp-block-group.alignfull,
	.alignfull {
		margin-left: 0;
		margin-right: 0;
		max-width: 100%;
		padding-left: 0;
		padding-right: 0;
		width: 100%;

		.wp-block-group__inner-container {
			padding: 0;
		}
	}

	.wp-block-group.alignwide,
	.alignwide {
		margin-left: auto;
		margin-right: auto;
		max-width: $width-breakpoint-wide !important;
		width: 100%;

		@media only screen and (min-width: 1044px) and (max-width: #{$width-breakpoint-wide + 64}) {
			padding-left: 2rem;
			padding-right: 2rem;
		}
	}

	.wmf-report.hentry {
		max-width: 100%;
		padding-bottom: 0;
		padding-left: 0;
		padding-right: 0;
		margin: 0;
		margin-bottom: 0;
	}

	.entry-content {
		max-width: 100%;
		margin-top: -1rem;
	}

	.wp-block-group.has-background {
		border-bottom-right-radius: 0;
	}

	/** Expandable Content **/
	.expandable-content {

		&::after {
			background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 80%);
		}
	}

	/* Hero */
	.is-style-default.wmf-pattern-endowment-hero {
		margin-bottom: -4rem;
		padding-bottom: 2rem;
		--slant: calc(80% - 3.8vw);

		@media only screen and (min-width: 782px) {
			clip-path: polygon(0 0, 100% 0, 100% 80%, 0 100%);
			padding-bottom: 6rem;
			margin-bottom: 0;
		}

		@media only screen and (min-width: 1700px) {
			clip-path: polygon(0 0, 100% 0, 100% var(--slant), 0 100%);
		}

		.wmf-pattern-endowment-hero__label {

			@media only screen and (min-width: 782px) {
				margin-top: 6rem;
			}

			img {
				filter: brightness(0) invert(1);
				line-height: 0;
				margin: 0 0.5rem -4px 0;
				padding: 0;
			}
		}

		.wmf-pattern-endowment-hero__title {

			&::after {
				background-color: #00ced6;
				content: "";
				display: block;
				height: 0.25rem;
				margin: 4rem 0 4rem 0;
				width: 6rem;
			}
		}

		.wmf-pattern-endowment-hero__image {
			margin: 0;
			clip-path: polygon(0 0, 100% 0, 100% 89%, 0 100%);

			@media only screen and (min-width: 1500px) {
				clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
			}
		}

		@media only screen and (max-width: 781px) {

			.wp-block-column:last-child {
				order: -1;
			}

			.wmf-pattern-endowment-hero__image {
				margin-left: -2rem;
				margin-right: -2rem;
			}
		}

		.expandable-content {

			&::after {
				background: linear-gradient(180deg, rgba(255, 255, 255, 0) 0%, rgba(28, 45, 62, 1) 80%);
			}
		}

		/** Letter from the CEO **/
		.wp-block-group.alignwide.wmf-pattern-letter-from-the-ceo {
			padding-left: 0;
			padding-right: 0;
		}
	}

	/** TOC **/
	.wmf-pattern-toc {
		margin-top: 4rem;
		margin-bottom: 4rem;
		position: relative;

		.wp-block-wmf-reports-table-of-contents {
			margin: 1rem 1rem 2rem 1rem;
			padding: 0;
			list-style-type: disc;

			li {
				color: #0060fe;
				list-style-type: disc;

				a {
					color: #0060fe;
				}
			}
		}

		.wp-block-buttons {

			@media only screen and (min-width: 782px) {
				position: absolute;
				bottom: 0;
				right: 0;
			}

			@media only screen and (min-width: #{782px + 128}) {
				right: 2rem;
			}
		}
	}

	@media only screen and (min-width: 782px) {

		.wmf-toc-jumplist {
			display: none;
		}
	}

	/** Images **/
	.wmf-pattern-image {
		clip-path: polygon(0 4%, 100% 0, 100% 100%, 0% 100%);

		@media only screen and (min-width: 782px) {
			clip-path: polygon(0 0, 100% 0, 100% 80%, 0 100%);
			margin-bottom: 2rem;
		}
	}

	.is-style-default.wmf-pattern-endowment-hero + .wmf-pattern-image {
		clip-path: polygon(0 0, 100% 6%, 100% 100%, 0% 100%);
	}

	.wp-block-image.is-style-report-image,
	.wp-block-image.is-style-report-image.alignwide,
	.wp-block-image.is-style-report-image-vertical,
	.wp-block-image.is-style-report-image-vertical.alignwide {
		background-color: transparent;

		img {
			border-bottom-right-radius: 0;
		}

		mark {
			margin-bottom: 2rem;
		}

		@media only screen and (min-width: 782px) {
			display: flex;

			figcaption {

				border-bottom-right-radius: none;
				padding: 1rem 1rem 1rem 2rem;
				position: relative;
				width: 100%;

				mark {
					position: relative;
					margin-top: 2rem;
				}
			}

			img {
				max-width: 66.66%;
				width: 100%;
			}
		}
	}

	/** Carousels **/
	.wmf-pattern-reports-carousel-slide {
		clip-path: polygon(0 0, 100% 0, 100% 96%, 0 100%);

		@media only screen and (min-width: 782px) {
			clip-path: polygon(0 0, 100% 0, 100% 80%, 0 100%);
		}

		&__image {
			background-color: #fff;
			margin: 0;

			@media only screen and (min-width: 782px) {
				height: 100%;
			}

			img {

				@media only screen and (min-width: 782px) {
					height: 100%;
				}
			}
		}

		&__location,
		&__location.is-style-sans-p {

			&::before {
				background: #0060fe;
			}
		}

		.wp-block-columns.alignwide {
			padding: 0;

			.wp-block-column:last-of-type {
				padding: 0 2rem 0 2rem;

				@media only screen and (min-width: 782px) {
					padding: 2rem 2rem 6rem 0;

					.wp-block-buttons {
						margin-bottom: 10rem;
					}
				}
			}
		}
	}

	.wp-block-wmf-reports-map.carousel,
	.wp-block-wmf-reports-stories.carousel {
		margin-bottom: 2rem;
	}

	/** Stories **/
	.wp-block-wmf-reports-stories.stories {

		.stories__categories-wrapper {
			padding-left: 0;
			padding-right: 0;
		}

		.stories__categories-outer-wrapper.alignwide,
		.stories__categories-wrapper.alignwide {
			max-width: calc($width-breakpoint-wide + 4rem) !important;
		}

		&.carousel .stories__categories-outer-wrapper.alignwide {

			&::after,
			&::before {
				background: linear-gradient(90deg, rgba(248, 249, 250, 0) 0%, rgba(255, 255, 255, 1) 80%);
			}

			&::before {
				background: linear-gradient(270deg, rgba(248, 249, 250, 0) 0%, rgba(255, 255, 255, 1) 80%);
			}
		}

		.category-slide {

			&:hover,
			&:focus,
			&.active {
				background-color: #0060fe;
				border-color: #0060fe;
				color: #fff;
			}
		}
	}

	/** Map **/
	.wp-block-wmf-reports-map {

		.marker.active,
		.cluster.active {
			background: #0060fe;
		}
	}

	/* Accordion */
	.wp-block-wmf-reports-accordion {
		width: 100% !important;
		max-width: 100% !important;

		.wp-block {
			max-width: 100%;
			margin-left: 0;
			margin-right: 0;
		}

		.wmf-accordion-wrapper {
			margin-top: 0;
		}
	}

	.wmf-pattern-financial-statements {

		.wp-block-wmf-reports-accordion--alt {

			.wp-block-wmf-reports-accordion-item:nth-of-type(1) .wmf-accordion-item::before,
			.wmf-accordion-item:nth-of-type(1)::before {
				background-color: #78107a;
			}

			.wp-block-wmf-reports-accordion-item:nth-of-type(2) .wmf-accordion-item::before,
			.wmf-accordion-item:nth-of-type(2)::before {
				background-color: #1c2d3e;
			}

			.wp-block-wmf-reports-accordion-item:nth-of-type(3) .wmf-accordion-item::before,
			.wmf-accordion-item:nth-of-type(3)::before {
				background-color: #0060fe;
			}

			.wp-block-wmf-reports-accordion-item:nth-of-type(4) .wmf-accordion-item::before,
			.wmf-accordion-item:nth-of-type(4)::before {
				background-color: #00ced6;
			}
		}
	}

	/* Financial Statements */
	// stylelint-disable-next-line no-duplicate-selectors
	.wmf-pattern-financial-statements {

		table {

			&.has-light-blue-background-color {
				border: 2rem solid #e3eef2;
			}

			&.has-wend-report-cobalt-background-color {
				border: 2rem solid #0060fe;
			}

			thead {
				border-bottom: 1px solid #0060fe;
			}

			td,
			th {
				border: 0;
			}

			tr {
				border-bottom: 1px solid #0060fe;
			}
		}

		.wp-block-columns.alignwide {
			gap: 0;
			padding-left: 0 !important;
			padding-right: 0 !important;

			@media only screen and (min-width: 782px) {
				gap: 4rem;
				padding-left: 4rem !important;
			}
		}
	}

	/* Leadership */
	.wmf-pattern-reports-leadership {

		a.wp-block-button__link:not([href]) {
			background-color: transparent;
			padding: 0;
		}
	}

	/* Donate */
	.wp-block-wmf-reports-donate {
		margin-bottom: 2rem;

		@media only screen and (min-width: 782px) {
			padding: 4rem !important;
		}

		.wp-block-button__link.has-wend-report-slate-blue-color {
			color: #1c2d3e !important;

			&::before {
				// stylelint-disable-next-line function-url-quotes
				background-image: url('data:image/svg+xml,<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.99854 16H15.9985V11H17.9985V16C17.9985 17.1046 17.1031 18 15.9985 18H1.99854C0.893966 18 -0.00146484 17.1046 -0.00146484 16V2C-0.00146484 0.89543 0.893965 0 1.99854 0H6.99854V2H1.99854V16Z" fill="%231C2D3E"/><path d="M9.99854 0H17.9985V8L14.7085 4.71L8.97853 10.44L7.55853 9.02L13.2885 3.29L9.99854 0Z" fill="%231C2D3E"/></svg>');
				background-repeat: no-repeat;
				background-position: 50% 50%;
				background-size: contain;
				content: " ";
				display: inline-block;
				height: 15px;
				width: 15px;
				margin-right: 0.5rem;
			}
		}

		.wp-block-button__link.has-wend-report-luminous-vivid-orange-background-color {
			background-color: #d40356 !important;
			color: #fff !important;

			&::before {
				// stylelint-disable-next-line function-url-quotes
				background-image: url('data:image/svg+xml,<svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.5733 8.38756L9.0007 16.0005L1.42814 8.38756C-0.477999 6.46691 -0.477999 3.36163 1.42814 1.44098C3.33428 -0.47532 6.42742 -0.47532 8.33355 1.44098C8.58915 1.69794 8.81009 1.98103 8.99637 2.27283C9.18265 1.97667 9.40359 1.69794 9.65918 1.44098C11.5653 -0.479675 14.6585 -0.479675 16.5689 1.44098C18.4751 3.35728 18.4751 6.46691 16.5689 8.38756H16.5733Z" fill="white"/></svg>');
				background-repeat: no-repeat;
				background-position: 50% 50%;
				background-size: contain;
				content: " ";
				display: inline-block;
				height: 15px;
				width: 15px;
				margin-right: 0.5rem;
			}
		}
	}

	/* Donors */
	.wmf-pattern-reports-donors {

		.wp-block-group-is-layout-flex {

			@media only screen and (max-width: 781px) {
				justify-content: space-between !important;
			}

			@media only screen and (min-width: 782px) {

				img {
					margin-left: 4rem;
				}
			}
		}

		.wp-block-wmf-reports-accordion:not(.wp-block-wmf-reports-accordion--alt) {
			width: auto !important;

			@media only screen and (min-width: 782px) {
				margin-left: 4rem;

				.wmf-accordion-item {
					border-color: #0060fe;
					margin-left: 4rem;
					overflow: visible;
				}

				.wmf-accordion-item__title {

					&::after {
						position: absolute;
						left: -4rem;
					}
				}
			}
		}
	}

	/* Contact */
	.wmf-pattern-contact {
		overflow: hidden;
		clip-path: polygon(0 0, 100% 9%, 100% 100%, 0 100%);
		margin-top: -2rem;
		padding-top: 4rem;
		padding-bottom: 2rem;

		.wp-block-group__inner-container {
			padding-left: 2rem !important;
			padding-right: 2rem !important;
			max-width: calc(440px + 4rem);
			text-align: center;
			margin-left: auto;
			margin-right: auto;

			.wp-block-heading {
				font-size: 26px;
				text-transform: none;
				text-align: center;

				&::after {
					display: block;
				}
			}
		}
	}

	/* Report */
	.wmf-pattern-previous-reports {
		clip-path: polygon(0 0, 100% 4%, 100% 100%, 0 96%);
		padding: 2rem  2rem;

		@media only screen and (min-width: 782px) {
			padding: 4rem  4rem;
		}

		.wp-block-heading.wp-block-wmf-reports-report__title,
		.wp-block-heading {
			font-size: 24px;

			a {
				text-decoration: none;

				&:focus,
				&:hover {
					text-decoration: underline;
				}
			}
		}

		.wp-block-wmf-reports-report__image {
			border-bottom-right-radius: 0;
		}
	}

	/** Overlay **/
	.wmf-annual-reports-overlay-wrapper {

		.wmf-annual-reports-overlay-popover {
			border-radius: 0;
		}

		.wmf-pattern-overlay {

			.wmf-pattern-overlay__heading {
				margin-bottom: 0.5rem;

				&::after {
					display: none;
				}
			}

			.wp-block-image.is-style-report-image,
			.wp-block-image.is-style-report-image.alignwide {

				margin-left: -1rem;
				margin-right: -1rem;
				background-color: #e5eef2;
				padding-left: 0;
				padding-right: 0;
				width: calc(100% + 2rem);
				display: block;
				border-bottom-right-radius: none;

				@media only screen and (min-width: 782px) {
					margin-left: auto;
					margin-right: auto;
					width: 100%;
				}

				@media only screen and ( min-width: #{ $width-breakpoint-wide + 64 } ) {
					margin-left: auto;
					margin-right: auto;
					border-bottom-right-radius: 0;
				}

				img {
					border-bottom-right-radius: 0;

					@media only screen and (min-width: 782px) {
						max-width: 100%;
						width: 100%;
					}
				}

				figcaption {
					font-size: 0.75rem;
					padding: 1rem 2rem;

					@media only screen and ( min-width: #{ $width-breakpoint-wide + 64 } ) {
						padding: 1rem;
					}

					mark {
						color: inherit !important;
						display: block;
						font-size: 0.625rem;
						margin-top: 0.5rem;
						margin-bottom: 1rem;

						&::before {
							content: "";
							// stylelint-disable-next-line function-url-quotes
							background-image: url('data:image/svg+xml,<svg width="14" height="14" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.1098 7.11994C12.0155 6.66987 11.2043 5.721 10.9298 4.56994C11.0198 4.65994 12.7498 5.47994 12.7498 5.47994L10.0198 0.939941L7.28984 5.48994L9.10984 4.57994C9.16562 5.24661 9.35253 5.8957 9.65984 6.48994C10.1259 7.33085 10.8189 8.02386 11.6598 8.48994C12.3754 8.79383 13.0478 9.19057 13.6598 9.66994L13.0198 10.2999L12.5698 9.84994L12.3098 11.3899L13.8498 11.1299L13.3998 10.6799L14.0198 10.0299C14.8783 10.9836 15.3893 12.1993 15.4698 13.4799L14.5598 13.4799V12.7499L13.2998 13.6599L14.5598 14.5699V13.8399H15.4698C15.4329 15.1333 14.916 16.3667 14.0198 17.2999L13.3798 16.6599L13.8298 16.2099L12.2998 15.9399L12.5598 17.4799L13.0098 17.0299L13.6498 17.6699C12.6962 18.5284 11.4804 19.0394 10.1998 19.1199V18.2099H10.9298L10.0198 16.9399L9.10984 18.2099H9.83984V19.1199C8.54995 19.0806 7.32057 18.5639 6.38984 17.6699L7.01984 17.0299L7.46984 17.4799L7.73984 15.9399L6.19984 16.1999L6.64984 16.6499L6.01984 17.2999C5.16133 16.3463 4.65035 15.1305 4.56984 13.8499L5.47984 13.8499V14.5799L6.73984 13.6699L5.47984 12.7599V13.4899H4.56984C4.60676 12.1966 5.12363 10.9632 6.01984 10.0299L6.65984 10.6699L6.20984 11.1199L7.74984 11.3799L7.46984 9.84994L7.01984 10.2999L6.37984 9.65994L5.01984 8.38994C2.6822 10.5769 2.04477 14.033 3.44842 16.91C4.85208 19.787 7.96837 21.4117 11.1308 20.9153C14.2932 20.4188 16.7618 17.9174 17.2164 14.7487C17.6709 11.5799 16.0052 8.48542 13.1098 7.11994Z" fill="%23006499"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.5198 13.6399C12.5198 15.0206 11.4005 16.1399 10.0198 16.1399C8.63912 16.1399 7.51984 15.0206 7.51984 13.6399C7.51984 12.2592 8.63912 11.1399 10.0198 11.1399C11.4005 11.1399 12.5198 12.2592 12.5198 13.6399Z" fill="%23970000"/></svg>');
							background-repeat: no-repeat;
							height: 14px;
							width: 14px;
							margin-right: 0.5rem;
							display: inline-block;
							vertical-align: bottom;
						}

					}
				}
			}

			&__image.wp-block-image {

				img {
					border-bottom-right-radius: 0;
				}
			}

			&__location,
			&__location.is-style-sans-p {

				&::before {
					background: #0060fe;
				}
			}

			.wp-block-quote:not(.is-style-pullquote) {

				p {
					margin-left: 1rem;
				}
			}
		}
	}
}

// Frontend only.
body.single-wmf-report.wikimedia-endow:not(.home) {

	.wmf-pattern-image--hide-desktop {

		@media only screen and (min-width: 782px) {
			display: none;
		}
	}

	.wmf-pattern-image--hide-mobile {
		display: none;

		@media only screen and (min-width: 782px) {
			display: block;
		}
	}
}

.wmf-pattern-endowment-welcome {

	.archive-report,
	.report {

		&__label {
			display: inline-block;
			background: #0060fe;
			color: #fff;

			@include base-font;
			text-transform: uppercase;
			font-size: 15px;
			padding: 4px 8px;
			margin-bottom: 1rem;

			img {
				filter: brightness(0) invert(1);
				line-height: 0;
				margin: 0 0.5rem -4px 0;
				padding: 0;
			}

			&::after {
				display: none;
			}
		}
	}

	.archive-report {

		&__image {

			@media only screen and (min-width: 782px) {
				clip-path: polygon(0 0, 100% 0, 100% 90%, 0% 100%);
			}
		}

		&__button {
			margin-bottom: 2rem;

			a {
				color: #000;
			}
		}
	}

	.report {

		> .wp-block-group__inner-container {
			display: grid;
			grid-template-columns: 33.33% 66.66%;
			gap: 1rem;
		}

		&__title {
			margin-top: 0;
			margin-bottom: 0.5rem;
			font-size: 1rem;

			a {
				text-decoration: none;
				font-size: 1rem;

				&:focus,
				&:hover {
					text-decoration: underline;
				}
			}

			&::after {
				display: none;
			}
		}

		&__date {
			font-size: 14px;
			margin-top: 0;
		}
	}
}
