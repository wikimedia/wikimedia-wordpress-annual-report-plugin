(()=>{"use strict";const e=window.React,t=window.wp.blocks,o=window.wp.i18n,a=window.wp.blockEditor,l=window.wp.components,r=window.wp.data,s=window.wp.element,n=JSON.parse('{"UU":"wmf-reports/overlay"}');(0,t.registerBlockType)(n.UU,{edit:function({attributes:n,clientId:c,setAttributes:i}){const{PostSelectButton:p}=window.hm.components,{postId:m,postType:d}=n,[u,_]=(0,s.useState)(!1),w=(0,r.useSelect)((e=>e("core/editor").getBlocksByClientId(c)[0].innerBlocks)),{media:y,post:v}=(0,r.useSelect)((e=>{const t=e("core").getEntityRecord("postType",d,m);return{media:t?.featured_media?e("core").getMedia(t?.featured_media):{},post:t}})),{insertBlocks:f,removeBlocks:g}=(0,r.useDispatch)("core/block-editor");return(0,e.createElement)("div",{...(0,a.useBlockProps)({className:"overlay"})},(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(l.PanelBody,null,(0,e.createElement)(l.SelectControl,{label:(0,o.__)("Choose Post Type","wmf-reports"),help:(0,o.__)("Altering the post type will allow you to choose posts from that post type using the select post button below.","wmf-reports"),options:[{label:"Post",value:"post"},{label:"Page",value:"page"},{label:"Profile",value:"profile"},{label:"Report",value:"wmf-report"},{label:"Story (Default)",value:"story"}],value:d,onChange:e=>{i({postType:e})}}),(0,e.createElement)(l.BaseControl,{className:"story-base-control",help:(0,o.__)("Associate this post with the overlay. Once you have chosen a post use the button below to refresh the overlay content.","wmf-reports"),id:(0,o.__)("Associated Post","wmf-reports"),label:(0,o.__)("Associated Post","wmf-reports")},(0,e.createElement)(p,{maxPosts:1,postType:d,value:[m],onSelect:e=>{const t=e?.[0]?.id||0;0!==t&&i({postId:t})}},(0,e.createElement)("span",{className:"components-button is-secondary"},(0,o.__)("Select post","wmf-reports")))),0!==m&&(0,e.createElement)(l.BaseControl,{className:"story-base-control",help:(0,o.__)("Pull the overlay content from the associated post.","wmf-reports"),id:(0,o.__)("Refresh Overlay Content","wmf-reports"),label:(0,o.__)("Refresh Overlay Content","wmf-reports")},(0,e.createElement)(l.Button,{variant:"secondary",onClick:()=>{if(!m||0===m||!v)return;const e=w.map((e=>e.clientId)),o=v.title.raw||"",a=v?.featured_media||0,l=y?.link,r=v?.content?.raw||"";g(e);const s=wp.blocks.rawHandler({HTML:r}),n=(0,t.createBlock)("core/group",{align:"full",className:"overlay__group",layout:{type:"constrained"}},[(0,t.createBlock)("core/columns",{align:"wide"},[(0,t.createBlock)("core/column",{width:"66.66%"},[(0,t.createBlock)("core/image",{aspectRatio:"4/3",className:"is-style-default overlay__image",id:a||74197,lightbox:{aspectRatio:"4/3",className:"is-style-default overlay__image",enabled:!1,id:a||74197,linkDestination:"none",scale:"cover",sizeSlug:"full",url:l||"/wp-content/uploads/2024/01/Wikimedia_Foundation_AI_Blog_Series_Header.png"},linkDestination:"none",scale:"cover",sizeSlug:"full",url:l||"/wp-content/uploads/2024/01/Wikimedia_Foundation_AI_Blog_Series_Header.png"})]),(0,t.createBlock)("core/column",{width:"33.33%"},[(0,t.createBlock)("core/paragraph",{className:"overlay__category is-style-sans-p",content:"Lorem ipsum / Sit amet",style:{elements:{link:{color:{text:"var:preset|color|orange"}}}},textColor:"orange"}),(0,t.createBlock)("core/heading",{className:"overlay__heading is-style-default",content:o||"Lorem ipsum dolor sit amet vulputate."})])]),(0,t.createBlock)("core/group",{align:"wide",className:"overlay__content",layout:{type:"constrained"}},s)]);f(n,null,c)}},(0,o.__)("Refresh Overlay","wmf-reports"))))),(0,e.createElement)("div",{className:"overlay-container"},(0,e.createElement)("div",{className:"overlay-container__navigation"},(0,e.createElement)(l.Button,{variant:"secondary",onClick:()=>_(!u)},u?(0,o.__)("Collapse Overlay Content","wmf-reports"):(0,o.__)("Edit Overlay Content","wmf-reports"))),u&&(0,e.createElement)("div",{className:"overlay-container__inner"},(0,e.createElement)(a.InnerBlocks,{template:[["core/paragraph",{placeholder:(0,o.__)("Add overlay contentâ€¦","wmf-reports")}]]}))))},save:()=>(0,e.createElement)(a.InnerBlocks.Content,null)})})();