(()=>{var e={899:(e,t)=>{var n=function(){var e={},t=Math.PI/180,n=180/Math.PI,i=6378137,r=20037508.342789244;function s(e){return Number(e)===e&&e%1!=0}function o(t){if(t=t||{},this.size=t.size||256,this.expansion=!0===t.antimeridian?2:1,!e[this.size]){var n=this.size,i=e[this.size]={};i.Bc=[],i.Cc=[],i.zc=[],i.Ac=[];for(var r=0;r<30;r++)i.Bc.push(n/360),i.Cc.push(n/(2*Math.PI)),i.zc.push(n/2),i.Ac.push(n),n*=2}this.Bc=e[this.size].Bc,this.Cc=e[this.size].Cc,this.zc=e[this.size].zc,this.Ac=e[this.size].Ac}return o.prototype.px=function(e,n){if(s(n)){var i=this.size*Math.pow(2,n),r=i/2,o=i/360,a=i/(2*Math.PI),l=i,c=Math.min(Math.max(Math.sin(t*e[1]),-.9999),.9999),u=r+e[0]*o,h=r+.5*Math.log((1+c)/(1-c))*-a;return u>l*this.expansion&&(u=l*this.expansion),h>l&&(h=l),[u,h]}return r=this.zc[n],c=Math.min(Math.max(Math.sin(t*e[1]),-.9999),.9999),u=Math.round(r+e[0]*this.Bc[n]),h=Math.round(r+.5*Math.log((1+c)/(1-c))*-this.Cc[n]),u>this.Ac[n]*this.expansion&&(u=this.Ac[n]*this.expansion),h>this.Ac[n]&&(h=this.Ac[n]),[u,h]},o.prototype.ll=function(e,t){if(s(t)){var i=this.size*Math.pow(2,t),r=i/360,o=i/(2*Math.PI),a=i/2,l=(e[1]-a)/-o;return[(e[0]-a)/r,n*(2*Math.atan(Math.exp(l))-.5*Math.PI)]}return l=(e[1]-this.zc[t])/-this.Cc[t],[(e[0]-this.zc[t])/this.Bc[t],n*(2*Math.atan(Math.exp(l))-.5*Math.PI)]},o.prototype.bbox=function(e,t,n,i,r){i&&(t=Math.pow(2,n)-1-t);var s=[e*this.size,(+t+1)*this.size],o=[(+e+1)*this.size,t*this.size],a=this.ll(s,n).concat(this.ll(o,n));return"900913"===r?this.convert(a,"900913"):a},o.prototype.xyz=function(e,t,n,i){"900913"===i&&(e=this.convert(e,"WGS84"));var r=[e[0],e[1]],s=[e[2],e[3]],o=this.px(r,t),a=this.px(s,t),l=[Math.floor(o[0]/this.size),Math.floor((a[0]-1)/this.size)],c=[Math.floor(a[1]/this.size),Math.floor((o[1]-1)/this.size)],u={minX:Math.min.apply(Math,l)<0?0:Math.min.apply(Math,l),minY:Math.min.apply(Math,c)<0?0:Math.min.apply(Math,c),maxX:Math.max.apply(Math,l),maxY:Math.max.apply(Math,c)};if(n){var h={minY:Math.pow(2,t)-1-u.maxY,maxY:Math.pow(2,t)-1-u.minY};u.minY=h.minY,u.maxY=h.maxY}return u},o.prototype.convert=function(e,t){return"900913"===t?this.forward(e.slice(0,2)).concat(this.forward(e.slice(2,4))):this.inverse(e.slice(0,2)).concat(this.inverse(e.slice(2,4)))},o.prototype.forward=function(e){var n=[i*e[0]*t,i*Math.log(Math.tan(.25*Math.PI+.5*e[1]*t))];return n[0]>r&&(n[0]=r),n[0]<-r&&(n[0]=-r),n[1]>r&&(n[1]=r),n[1]<-r&&(n[1]=-r),n},o.prototype.inverse=function(e){return[e[0]*n/i,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/i)))*n]},o}();e.exports=n},396:function(e){!function(t){var n,i,r=!1;function s(e){if("undefined"!=typeof document&&!r){var t=document.documentElement;i=window.pageYOffset,document.documentElement.scrollHeight>window.innerHeight?t.style.width="calc(100% - "+function(){if(void 0!==n)return n;var e=document.documentElement,t=document.createElement("div");return t.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),e.appendChild(t),n=t.offsetWidth-t.clientWidth,e.removeChild(t),n}()+"px)":t.style.width="100%",t.style.position="fixed",t.style.top=-i+"px",t.style.overflow="hidden",r=!0}}function o(){if("undefined"!=typeof document&&r){var e=document.documentElement;e.style.width="",e.style.position="",e.style.top="",e.style.overflow="",window.scroll(0,i),r=!1}}var a={on:s,off:o,toggle:function(){r?o():s()}};void 0!==e.exports?e.exports=a:t.noScroll=a}(this)},929:function(e){var t;t=function(){var e="",t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(e){return e.match(t)||[]}function i(t){return{language:(t=n(t))[1]||e,extlang:t[2]||e,script:t[3]||e,region:t[4]||e}}function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!0})}function s(t,s,o){function a(i){return n(i)[t]||e}r(a,"pattern",s),r(i,o,a)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(i,"split",(function(e){return n(e).filter((function(e,t){return e&&t}))})),i},e.exports?e.exports=t():this.subtag=t()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React;var t=n.n(e);const i=window.wp.blocks,r=window.wp.i18n,s=window.wp.blockEditor,o=window.wp.components;var a=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&p(e,n,t[n]);if(u)for(var n of u(t))d.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>l(e,c(t)),g=(e,t)=>{var n={};for(var i in e)h.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&u)for(var i of u(e))t.indexOf(i)<0&&d.call(e,i)&&(n[i]=e[i]);return n},v=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},b=(e,t,n)=>(v(e,t,"read from private field"),n?n.call(e):t.get(e)),w=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},y=(e,t,n,i)=>(v(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),x=(e,t,n)=>(v(e,t,"access private method"),n),k=(e,t,n)=>new Promise(((i,r)=>{var s=e=>{try{a(n.next(e))}catch(e){r(e)}},o=e=>{try{a(n.throw(e))}catch(e){r(e)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,o);a((n=n.apply(e,t)).next())})),M="https://api.mapbox.com/autofill/v1",E=`${M}/suggest`,S=`${M}/retrieve`,A=class{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90");if(this.lng>180||this.lng<-180)throw new Error("Invalid LngLat longitude value: must be between -180 and 180")}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}static convert(e){if(e instanceof A)return new A(e.lng,e.lat);if(Array.isArray(e)&&2===e.length)return new A(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e&&("lng"in e||"lon"in e)&&"lat"in e)return new A(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}},C=class{constructor(e,t){this._sw=A.convert(e),this._ne=A.convert(t)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new A(this.getWest(),this.getNorth())}getSouthEast(){return new A(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toFlatArray(){return[this._sw.lng,this._sw.lat,this._ne.lng,this._ne.lat]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}static convert(e){if(!e)throw new Error("Invalid LngLatBounds convert value: falsy");if(e instanceof C)return new C(e.getSouthWest(),e.getNorthEast());if(Array.isArray(e)&&2===e.length)return new C(A.convert(e[0]),A.convert(e[1]));if(Array.isArray(e)&&4===e.length)return new C(A.convert([e[0],e[1]]),A.convert([e[2],e[3]]));throw new Error("`LngLatBoundsLike` argument must be specified as an array [<LngLatLike>, <LngLatLike>] or an array [<west>, <south>, <east>, <north>]")}},T=class{constructor(e){this.id=null!=e?e:function(){const e=(Math.random().toString(16)+Date.now().toString(16)+Math.random().toString(16)).replace(/\./g,"");return[e.slice(0,8),e.slice(8,12),"4"+e.slice(12,15)+"-8"+e.slice(15,18),e.slice(18,30)].join("-")}()}toString(){return this.id}static convert(e){return new T(e instanceof T?e.id:e.toString())}},L=class extends Error{constructor(e,t){super(String(e.message||e.error||"Unknown error")),this.name="MapboxError",this.statusCode=t}toString(){return`${this.name} (${this.statusCode}): ${this.message}`}};function W(e){return k(this,null,(function*(){if(!e.ok){const t=yield e.json();throw new L(t,e.status)}}))}var B,I,_=globalThis.fetch,R=globalThis.AbortController;function O(){if(!_)throw new Error("Fetch implementation not found. Please include a fetch polyfill in your application or use `polyfillFetch` from `@mapbox/search-js-core` to fix this issue.");return{fetch:_,AbortController:R}}function j(...e){const t=[];for(const n of e){if(!n)continue;const e=Object.entries(n);for(const[n,i]of e)null!=i&&t.push(`${n}=${encodeURIComponent(String(i))}`)}return t.join("&")}var P=class{constructor(e={}){w(this,B);const t=e,{accessToken:n}=t,i=g(t,["accessToken"]);this.accessToken=n,this.defaults=f(f({},P.defaults),i)}suggest(e,t){return k(this,null,(function*(){if(!e)throw new Error("searchText is required");const{sessionToken:n,signal:i}=t,r=m(f(f({},this.defaults),t),{sessionToken:n}),s=new URL(`${E}/${encodeURIComponent(e)}`);s.search=x(this,B,I).call(this,r);const{fetch:o}=O(),a=yield o(s.toString(),{signal:i});yield W(a);const l=yield a.json();return m(f({},l),{suggestions:l.suggestions.map((t=>m(f({},t),{original_search_text:e}))),url:s.toString()})}))}retrieve(e,t){return k(this,null,(function*(){if(!e)throw new Error("suggestion is required");if(!this.canRetrieve(e))throw new Error("suggestion cannot be retrieved");const{sessionToken:n,signal:i}=t,r=T.convert(n),s=new URL(`${S}/${e.action.id}`);s.search=j({access_token:this.accessToken,session_token:r.id});const{fetch:o}=O(),a=yield o(s.toString(),{signal:i});yield W(a);const l=yield a.json();return l.url=s.toString(),l}))}canRetrieve(e){const t=e.action;return"string"==typeof(null==t?void 0:t.id)}},N=P;B=new WeakSet,I=function(e){return j({types:"address",access_token:this.accessToken,streets:e.streets,language:e.language,country:e.country,limit:e.limit},e.sessionToken&&{session_token:T.convert(e.sessionToken).id},e.proximity&&{proximity:"string"==typeof e.proximity?e.proximity:A.convert(e.proximity).toArray().join(",")},e.bbox&&{bbox:"string"==typeof e.bbox?e.bbox:C.convert(e.bbox).toFlatArray().join(",")})},N.defaults={language:"en",proximity:"ip",streets:!0};var F,$,z="https://api.mapbox.com/search/searchbox/v1",D=`${z}/suggest`,H=`${z}/retrieve`,q=`${z}/category`,Y=`${z}/reverse`,U=class{constructor(e={}){w(this,F);const t=e,{accessToken:n}=t,i=g(t,["accessToken"]);this.accessToken=n,this.defaults=f(f({},U.defaults),i)}suggest(e,t){return k(this,null,(function*(){if(!e)throw new Error("searchText is required");const{sessionToken:n,signal:i}=t,r=m(f(f({},this.defaults),t),{q:e,sessionToken:n});if(r.eta_type&&(!r.origin||!r.navigation_profile))throw new Error("to provide eta estimate: eta, navigation_profile, and origin are required");if(r.origin&&!r.navigation_profile)throw new Error("to provide distance estimate: both navigation_profile and origin are required");const s=new URL(D);s.search=x(this,F,$).call(this,r);const{fetch:o}=O(),a=yield o(s.toString(),{signal:i});yield W(a);const l=yield a.json();return l.url=s.toString(),l}))}retrieve(e,t){return k(this,null,(function*(){if(!e)throw new Error("suggestion is required");const{sessionToken:n,signal:i}=t,r=T.convert(n),s=new URL(`${H}/${encodeURIComponent(e.mapbox_id)}`);s.search=j({access_token:this.accessToken,session_token:r.id});const{fetch:o}=O(),a=yield o(s.toString(),{signal:i});yield W(a);const l=yield a.json();return l.url=s.toString(),l}))}category(e){return k(this,arguments,(function*(e,t={}){if(!e)throw new Error("category is required");const n=f(f({},this.defaults),t),i=new URL(`${q}/${encodeURIComponent(e)}`);i.search=x(this,F,$).call(this,n);const{fetch:r}=O(),s=yield r(i.toString(),{signal:n.signal});yield W(s);const o=yield s.json();return o.url=i.toString(),o}))}reverse(e){return k(this,arguments,(function*(e,t={}){if(!e)throw new Error("lngLat is required");const[n,i]="string"==typeof e?e.split(",").map((e=>parseFloat(e))):A.convert(e).toArray();if(isNaN(n)||isNaN(i))throw new Error("lngLat is required");const r=f(f({},this.defaults),t),s=new URL(Y);s.search=j({access_token:this.accessToken,language:r.language,limit:r.limit,longitude:n,latitude:i},r.types&&{types:"string"==typeof r.types?r.types:[...r.types].join(",")});const{fetch:o}=O(),a=yield o(s.toString(),{signal:r.signal});yield W(a);const l=yield a.json();return l.url=s.toString(),l}))}},X=U;F=new WeakSet,$=function(e){return j({q:e.q,access_token:this.accessToken,language:e.language,limit:e.limit,navigation_profile:e.navigation_profile,route:e.route,route_geometry:e.route_geometry,sar_type:e.sar_type,time_deviation:e.time_deviation,eta_type:e.eta_type,country:e.country,poi_category:e.poi_category,radius:e.radius,user_id:e.user_id,rich_metadata_provider:e.rich_metadata_provider,poi_category_exclusions:e.poi_category_exclusions},e.sessionToken&&{session_token:T.convert(e.sessionToken).id},e.proximity&&{proximity:"string"==typeof e.proximity?e.proximity:A.convert(e.proximity).toArray().join(",")},e.origin&&{origin:"string"==typeof e.origin?e.origin:A.convert(e.origin).toArray().join(",")},e.bbox&&{bbox:"string"==typeof e.bbox?e.bbox:C.convert(e.bbox).toFlatArray().join(",")},e.types&&{types:"string"==typeof e.types?e.types:[...e.types].join(",")})},X.defaults={language:"en"};var Z,G,V=class{constructor(e={}){w(this,Z);const t=e,{accessToken:n}=t,i=g(t,["accessToken"]);this.accessToken=n,this.defaults=f(f({},V.defaults),i)}validate(e,t){return k(this,null,(function*(){if(!e)throw new Error("searchText is required");const{sessionToken:n,signal:i}=t,r=m(f(f({},this.defaults),t),{sessionToken:n}),s=new URL(`https://api.mapbox.com/autofill/v1/retrieve/${encodeURIComponent(e)}`);s.search=x(this,Z,G).call(this,r);const{fetch:o}=O(),a=yield o(s.toString(),{signal:i});yield W(a);const l=yield a.json();return l.url=s.toString(),l.features.length>0&&(l.features=[l.features[0]]),l}))}},Q=V;Z=new WeakSet,G=function(e){return j({access_token:this.accessToken,language:e.language,country:e.country},e.sessionToken&&{session_token:T.convert(e.sessionToken).id},e.proximity&&{proximity:"string"==typeof e.proximity?e.proximity:A.convert(e.proximity).toArray().join(",")},e.bbox&&{bbox:"string"==typeof e.bbox?e.bbox:C.convert(e.bbox).toFlatArray().join(",")})},Q.defaults={language:"en",proximity:"ip"},new WeakSet;var J,K,ee,te,ne=(e=>(e.exact="exact",e.high="high",e.medium="medium",e.low="low",e))(ne||{}),ie=class{constructor(){w(this,J,{})}addEventListener(e,t){const n=b(this,J);n[e]||(n[e]=[]),n[e].push(t)}removeEventListener(e,t){const n=b(this,J);if(!n[e])return;const i=n[e],r=i.indexOf(t);-1!==r&&i.splice(r,1)}fire(e,t){const n=b(this,J);if(!n[e])return;const i=n[e];for(const e of i)e(t)}};function re(e,t,n){let i=null;return(...r)=>{null!==i&&clearTimeout(i);const s=n&&n();i=setTimeout((()=>{i=null,(null==s?void 0:s.aborted)||e(...r)}),t)}}function se(){const{AbortController:e}=O();return new e}J=new WeakMap;var oe=class extends ie{constructor(e,t=0){super(),this.sessionToken=new T,w(this,K,void 0),w(this,ee,se()),w(this,te,void 0),y(this,te,re(((e,...t)=>k(this,[e,...t],(function*(e,t={}){if(b(this,ee).abort(),y(this,ee,se()),!e)return y(this,K,null),void this.fire("suggest",b(this,K));try{const n=yield this.search.suggest(e,m(f({sessionToken:this.sessionToken},t),{signal:b(this,ee).signal}));y(this,K,n),this.fire("suggest",n)}catch(e){if("AbortError"===e.name)return;this.fire("suggesterror",e)}}))),t,(()=>b(this,ee).signal))),Object.defineProperties(this,{search:{value:e,writable:!1},debounce:{value:t,writable:!1}})}get suggestions(){return b(this,K)}suggest(e,t){return b(this,te).call(this,e,t),new Promise(((e,t)=>{let n,i;n=t=>{this.removeEventListener("suggest",n),this.removeEventListener("suggesterror",i),e(t)},i=e=>{this.removeEventListener("suggest",n),this.removeEventListener("suggesterror",i),t(e)},this.addEventListener("suggest",n),this.addEventListener("suggesterror",i)}))}clear(){this.suggest("")}retrieve(e,t){return k(this,null,(function*(){const n=yield this.search.retrieve(e,f({sessionToken:this.sessionToken},t));return this.fire("retrieve",n),n}))}canRetrieve(e){return!this.search.canRetrieve||this.search.canRetrieve(e)}canSuggest(e){return!this.search.canSuggest||this.search.canSuggest(e)}abort(){b(this,ee).abort(),y(this,ee,se())}};function ae(e){const{properties:t}=e;return f({},t)}function le(e){return e.split("-")[0]}function ce(e){return e.split("-")[1]}function ue(e){return["top","bottom"].includes(le(e))?"x":"y"}function he(e){return"y"===e?"height":"width"}function de(e,t,n){let{reference:i,floating:r}=e;const s=i.x+i.width/2-r.width/2,o=i.y+i.height/2-r.height/2,a=ue(t),l=he(a),c=i[l]/2-r[l]/2,u="x"===a;let h;switch(le(t)){case"top":h={x:s,y:i.y-r.height};break;case"bottom":h={x:s,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:o};break;case"left":h={x:i.x-r.width,y:o};break;default:h={x:i.x,y:i.y}}switch(ce(t)){case"start":h[a]-=c*(n&&u?-1:1);break;case"end":h[a]+=c*(n&&u?-1:1)}return h}function pe(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function fe(e,t){var n;void 0===t&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:p=0}=t,f=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(p),m=a[d?"floating"===h?"reference":"floating":h],g=pe(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=pe(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===h?{...o.floating,x:i,y:r}:o.reference,offsetParent:await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),strategy:l}):o[h]);return{top:g.top-v.top+f.top,bottom:v.bottom-g.bottom+f.bottom,left:g.left-v.left+f.left,right:v.right-g.right+f.right}}K=new WeakMap,ee=new WeakMap,te=new WeakMap,Math.min,Math.max;const me={left:"right",right:"left",bottom:"top",top:"bottom"};function ge(e){return e.replace(/left|right|bottom|top/g,(e=>me[e]))}function ve(e,t,n){void 0===n&&(n=!1);const i=ce(e),r=ue(e),s=he(r);let o="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=ge(o)),{main:o,cross:ge(o)}}const be={start:"end",end:"start"};function we(e){return e.replace(/start|end/g,(e=>be[e]))}const ye=(["top","right","bottom","left"].reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:i,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",flipAlignment:p=!0,...f}=e,m=le(i),g=h||(m!==o&&p?function(e){const t=ge(e);return[we(e),t,we(t)]}(o):[ge(o)]),v=[o,...g],b=await fe(t,f),w=[];let y=(null==(n=r.flip)?void 0:n.overflows)||[];if(c&&w.push(b[m]),u){const{main:e,cross:t}=ve(i,s,await(null==a.isRTL?void 0:a.isRTL(l.floating)));w.push(b[e],b[t])}if(y=[...y,{placement:i,overflows:w}],!w.every((e=>e<=0))){var x,k;const e=(null!=(x=null==(k=r.flip)?void 0:k.index)?x:0)+1,t=v[e];if(t)return{data:{index:e,overflows:y},reset:{placement:t}};let n="bottom";switch(d){case"bestFit":{var M;const e=null==(M=y.map((e=>[e,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:M[0].placement;e&&(n=e);break}case"initialPlacement":n=o}if(i!==n)return{reset:{placement:n}}}return{}}}}),xe=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:i}=t,r=await async function(e,t){const{placement:n,platform:i,elements:r}=e,s=await(null==i.isRTL?void 0:i.isRTL(r.floating)),o=le(n),a=ce(n),l="x"===ue(n),c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h="function"==typeof t?t(e):t;let{mainAxis:d,crossAxis:p,alignmentAxis:f}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&"number"==typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}(t,e);return{x:n+r.x,y:i+r.y,data:r}}}};function ke(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Me(e){if(null==e)return window;if(!ke(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ee(e){return Me(e).getComputedStyle(e)}function Se(e){return ke(e)?"":e?(e.nodeName||"").toLowerCase():""}function Ae(){const e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((e=>e.brand+"/"+e.version)).join(" "):navigator.userAgent}function Ce(e){return e instanceof Me(e).HTMLElement}function Te(e){return e instanceof Me(e).Element}function Le(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Me(e).ShadowRoot||e instanceof ShadowRoot)}function We(e){const{overflow:t,overflowX:n,overflowY:i}=Ee(e);return/auto|scroll|overlay|hidden/.test(t+i+n)}function Be(e){return["table","td","th"].includes(Se(e))}function Ie(e){const t=/firefox/i.test(Ae()),n=Ee(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function _e(){return!/^((?!chrome|android).)*safari/i.test(Ae())}const Re=Math.min,Oe=Math.max,je=Math.round;function Pe(e,t,n){var i,r,s,o;void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect();let l=1,c=1;t&&Ce(e)&&(l=e.offsetWidth>0&&je(a.width)/e.offsetWidth||1,c=e.offsetHeight>0&&je(a.height)/e.offsetHeight||1);const u=Te(e)?Me(e):window,h=!_e()&&n,d=(a.left+(h&&null!=(i=null==(r=u.visualViewport)?void 0:r.offsetLeft)?i:0))/l,p=(a.top+(h&&null!=(s=null==(o=u.visualViewport)?void 0:o.offsetTop)?s:0))/c,f=a.width/l,m=a.height/c;return{width:f,height:m,top:p,right:d+f,bottom:p+m,left:d,x:d,y:p}}function Ne(e){return(t=e,(t instanceof Me(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function Fe(e){return Te(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $e(e){return Pe(Ne(e)).left+Fe(e).scrollLeft}function ze(e,t,n){const i=Ce(t),r=Ne(t),s=Pe(e,i&&function(e){const t=Pe(e);return je(t.width)!==e.offsetWidth||je(t.height)!==e.offsetHeight}(t),"fixed"===n);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&"fixed"!==n)if(("body"!==Se(t)||We(r))&&(o=Fe(t)),Ce(t)){const e=Pe(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else r&&(a.x=$e(r));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function De(e){return"html"===Se(e)?e:e.assignedSlot||e.parentNode||(Le(e)?e.host:null)||Ne(e)}function He(e){return Ce(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function qe(e){const t=Me(e);let n=He(e);for(;n&&Be(n)&&"static"===getComputedStyle(n).position;)n=He(n);return n&&("html"===Se(n)||"body"===Se(n)&&"static"===getComputedStyle(n).position&&!Ie(n))?t:n||function(e){let t=De(e);for(Le(t)&&(t=t.host);Ce(t)&&!["html","body"].includes(Se(t));){if(Ie(t))return t;t=t.parentNode}return null}(e)||t}function Ye(e){if(Ce(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=Pe(e);return{width:t.width,height:t.height}}function Ue(e){const t=De(e);return["html","body","#document"].includes(Se(t))?e.ownerDocument.body:Ce(t)&&We(t)?t:Ue(t)}function Xe(e,t){var n;void 0===t&&(t=[]);const i=Ue(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),s=Me(i),o=r?[s].concat(s.visualViewport||[],We(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(Xe(o))}function Ze(e,t,n){return"viewport"===t?pe(function(e,t){const n=Me(e),i=Ne(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const e=_e();(e||!e&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,n)):Te(t)?function(e,t){const n=Pe(e,!1,"fixed"===t),i=n.top+e.clientTop,r=n.left+e.clientLeft;return{top:i,left:r,x:r,y:i,right:r+e.clientWidth,bottom:i+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):pe(function(e){var t;const n=Ne(e),i=Fe(e),r=null==(t=e.ownerDocument)?void 0:t.body,s=Oe(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Oe(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let a=-i.scrollLeft+$e(e);const l=-i.scrollTop;return"rtl"===Ee(r||n).direction&&(a+=Oe(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(Ne(e)))}function Ge(e){const t=Xe(e),n=["absolute","fixed"].includes(Ee(e).position)&&Ce(e)?qe(e):e;return Te(n)?t.filter((e=>Te(e)&&function(e,t){const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Le(n)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(e,n)&&"body"!==Se(e))):[]}const Ve={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const s=[..."clippingAncestors"===n?Ge(t):[].concat(n),i],o=s[0],a=s.reduce(((e,n)=>{const i=Ze(t,n,r);return e.top=Oe(i.top,e.top),e.right=Re(i.right,e.right),e.bottom=Re(i.bottom,e.bottom),e.left=Oe(i.left,e.left),e}),Ze(t,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:i}=e;const r=Ce(n),s=Ne(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((r||!r&&"fixed"!==i)&&(("body"!==Se(n)||We(s))&&(o=Fe(n)),Ce(n))){const e=Pe(n,!0);a.x=e.x+n.clientLeft,a.y=e.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:Te,getDimensions:Ye,getOffsetParent:qe,getDocumentElement:Ne,getElementRects:e=>{let{reference:t,floating:n,strategy:i}=e;return{reference:ze(t,qe(n),i),floating:{...Ye(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===Ee(e).direction};var Qe=n(396),Je=n.n(Qe),Ke=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],et=Ke.join(","),tt="undefined"==typeof Element,nt=tt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,it=!tt&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},rt=function(e,t,n){var i=Array.prototype.slice.apply(e.querySelectorAll(et));return t&&nt.call(e,et)&&i.unshift(e),i.filter(n)},st=function e(t,n,i){for(var r=[],s=Array.from(t);s.length;){var o=s.shift();if("SLOT"===o.tagName){var a=o.assignedElements(),l=e(a.length?a:o.children,!0,i);i.flatten?r.push.apply(r,l):r.push({scope:o,candidates:l})}else{nt.call(o,et)&&i.filter(o)&&(n||!t.includes(o))&&r.push(o);var c=o.shadowRoot||"function"==typeof i.getShadowRoot&&i.getShadowRoot(o),u=!i.shadowRootFilter||i.shadowRootFilter(o);if(c&&u){var h=e(!0===c?o.children:c.children,!0,i);i.flatten?r.push.apply(r,h):r.push({scope:o,candidates:h})}else s.unshift.apply(s,o.children)}}return r},ot=function(e,t){return e.tabIndex<0&&(t||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},at=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},lt=function(e){return"INPUT"===e.tagName},ct=function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return 0===n&&0===i},ut=function(e,t){return!(t.disabled||function(e){return lt(e)&&"hidden"===e.type}(t)||function(e,t){var n=t.displayCheck,i=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var r=nt.call(e,"details>summary:first-of-type")?e.parentElement:e;if(nt.call(r,"details:not([open]) *"))return!0;var s=it(e).host,o=(null==s?void 0:s.ownerDocument.contains(s))||e.ownerDocument.contains(e);if(n&&"full"!==n){if("non-zero-area"===n)return ct(e)}else{if("function"==typeof i){for(var a=e;e;){var l=e.parentElement,c=it(e);if(l&&!l.shadowRoot&&!0===i(l))return ct(e);e=e.assignedSlot?e.assignedSlot:l||c===e.ownerDocument?l:c.host}e=a}if(o)return!e.getClientRects().length}return!1}(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var i=t.children.item(n);if("LEGEND"===i.tagName)return!!nt.call(t,"fieldset[disabled] *")||!i.contains(e)}return!0}t=t.parentElement}return!1}(t))},ht=function(e,t){return!(function(e){return function(e){return lt(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||it(e),i=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=i(window.CSS.escape(e.name));else try{t=i(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!r||r===e}(e)}(t)||ot(t)<0||!ut(e,t))},dt=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},pt=function e(t){var n=[],i=[];return t.forEach((function(t,r){var s=!!t.scope,o=s?t.scope:t,a=ot(o,s),l=s?e(t.candidates):o;0===a?s?n.push.apply(n,l):n.push(o):i.push({documentOrder:r,tabIndex:a,item:t,isScope:s,content:l})})),i.sort(at).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},ft=function(e,t){var n;return n=(t=t||{}).getShadowRoot?st([e],t.includeContainer,{filter:ht.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:dt}):rt(e,t.includeContainer,ht.bind(null,t)),pt(n)},mt=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==nt.call(e,et)&&ht(t,e)},gt=Ke.concat("iframe").join(","),vt=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==nt.call(e,gt)&&ut(t,e)};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xt,kt=(xt=[],{activateTrap:function(e){if(xt.length>0){var t=xt[xt.length-1];t!==e&&t.pause()}var n=xt.indexOf(e);-1===n||xt.splice(n,1),xt.push(e)},deactivateTrap:function(e){var t=xt.indexOf(e);-1!==t&&xt.splice(t,1),xt.length>0&&xt[xt.length-1].unpause()}}),Mt=function(e){return setTimeout(e,0)},Et=function(e,t){var n=-1;return e.every((function(e,i){return!t(e)||(n=i,!1)})),n},St=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return"function"==typeof e?e.apply(void 0,n):e},At=function(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target},Ct=n(929),Tt=n.n(Ct),Lt=n(899),Wt=n.n(Lt),Bt=Object.defineProperty,It=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,Ot=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,Pt=(e,t,n)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nt=(e,t)=>{for(var n in t||(t={}))Ot.call(t,n)&&Pt(e,n,t[n]);if(Rt)for(var n of Rt(t))jt.call(t,n)&&Pt(e,n,t[n]);return e},Ft=(e,t)=>It(e,_t(t)),$t=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},zt=(e,t,n)=>($t(e,t,"read from private field"),n?n.call(e):t.get(e)),Dt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ht=(e,t,n,i)=>($t(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),qt=(e,t,n)=>($t(e,t,"access private method"),n),Yt=(e,t,n)=>new Promise(((i,r)=>{var s=e=>{try{a(n.next(e))}catch(e){r(e)}},o=e=>{try{a(n.throw(e))}catch(e){r(e)}},a=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,o);a((n=n.apply(e,t)).next())})),Ut=document.implementation.createHTMLDocument();function Xt(e,t){const n={};for(const[i,r]of Object.entries(t))n[i]=e.querySelector(r);return n}function Zt(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}function Gt(e,t){if(!e)return;Object.getOwnPropertyDescriptor(e.constructor.prototype,"value").set.call(e,t);const n=e;n._valueTracker&&n._valueTracker.setValue("");const i=new Event("input",{bubbles:!0});i.simulated=!0,e.dispatchEvent(i);const r=new Event("change",{bubbles:!0});r.simulated=!0,e.dispatchEvent(r)}function Vt(e,t=!1){let n,i;const r=e.getBoundingClientRect();if("none"===e.style.display||0===r.height&&0===r.width){const r=e.cloneNode(t);e.parentElement.appendChild(r),r.style.setProperty("display","block","important");const s=r.getBoundingClientRect();n=s.width,i=s.height,r.style.setProperty("display","none"),r.remove()}else n=r.width,i=r.height;return{height:Math.floor(i),width:Math.floor(n)}}var Qt=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),Jt=new RegExp(`\\.${Qt.source}`,"g"),Kt=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function en(e,t){return e.replace(Jt,(e=>"."+t(e.slice(1))))}function tn(e,t){const n=function(e){const t=Ut.createElement("style");return t.textContent=e,Ut.head.appendChild(t),t.sheet}(e),i=n.cssRules;function r(e){if(e instanceof CSSStyleRule)return`${en(e.selectorText,t)} { ${e.style.cssText} }`;const n=Kt.exec(e.cssText.split("\n").join(""));return n&&n.length>2?`${n[1]} { ${tn(n[2],t)} }`:e.cssText}let s="";for(const e of Array.from(i))s+=r(e)+"\n\n";return s.trim()}function nn(e,t){const n=Array.from(e.querySelectorAll("[class]"));n.push(e);for(const e of n){const{classList:n}=e;for(const e of Array.from(n))n.remove(e),n.add(t(e))}return e}function rn(e,t){return`https://api.mapbox.com/styles/v1/${e}/${t}/static/`}var sn,on,an,ln='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>',cn=rn("mapbox","satellite-streets-v11"),un=["mapbox.com","mapbox.cn","tilestream.net"],hn=Zt('\n<template>\n  <div class="MapboxSearch">\n    <div class="Label" role="label" aria-live="polite" aria-atomic="true">\n    </div>\n    <div class="Results" aria-hidden="true">\n      <div class="ResultsList" role="listbox">\n      </div>\n      <div class="ResultsAttribution" aria-hidden="true">\n        <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">\n          Powered by Mapbox\n        </a>\n      </div>\n    </div>\n  </div>\n</template>\n'),dn=Zt('\n<template>\n  <div class="Suggestion" role="option" tabindex="-1">\n    <div class="SuggestionIcon" aria-hidden="true"></div>\n    <div class="SuggestionText">\n      <div class="SuggestionName"></div>\n      <div class="SuggestionDesc"></div>\n    </div>\n  </div>\n</template>\n'),pn=Zt(`\n<template>\n  <div class="SearchBox">\n    <div class="SearchIcon"></div>\n    <input class="Input" type="text" />\n    <div class="ActionIcon">\n      <button aria-label="Clear" class="ClearBtn">${ln}</button>\n      <div class="LoadingIcon"><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/></svg></div>\n    </div>\n  </div>\n</template>\n`);function fn(){return"mbx"+(new T).id.slice(0,8)}function mn(e){try{return JSON.parse(e)}catch(e){return null}}function gn(e,t){if(null==e||null==t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const i of n)if(!gn(e[i],t[i]))return!1;return!0}function vn(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var bn=class extends HTMLElement{constructor(){super(...arguments),Dt(this,sn,fn()),Dt(this,on,void 0),Dt(this,an,(e=>`${zt(this,sn)}--${e}`))}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,t){const n=n=>n.replace(e,t);nn(this,n);const i=Array.from(this.querySelectorAll("style"));for(const e of i)e.textContent=en(e.textContent,n);i.length&&Ht(this,on,i[i.length-1]);const r=Array.from(this.querySelectorAll(`[id^="${e}"]`));for(const n of r)n.id=n.id.replace(e,t)}connectedCallback(){if(this.childElementCount>0){const e=this.dataset.seed,t=zt(this,sn);return void(e&&e!==t&&(this.clonedCallback(e,t),this.dataset.seed=t))}this.dataset.seed=zt(this,sn);const e=this.template;if(e){const t=this.prepareTemplate(e);this.appendChild(t)}const t=this.templateStyle;if(t){const e=document.createElement("style");e.textContent=this.prepareCSS(t),this.appendChild(e)}const n=document.createElement("style");this.templateUserStyle&&(n.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(n),Ht(this,on,n)}prepareTemplate(e){return nn(e.content.firstElementChild.cloneNode(!0),zt(this,an))}prepareCSS(e){return tn(e,zt(this,an))}updateTemplateUserStyle(e){zt(this,on)&&(zt(this,on).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(en(e,zt(this,an)))}querySelectorAll(e){return super.querySelectorAll(en(e,zt(this,an)))}addEventListener(e,t,n){super.addEventListener(e,t,n)}removeEventListener(e,t,n){super.removeEventListener(e,t,n)}dispatchEvent(e){return super.dispatchEvent(e)}};sn=new WeakMap,on=new WeakMap,an=new WeakMap;var wn,yn,xn="1.0.0-beta.19",kn={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingFooterLabel:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:"\n      0 0 10px 2px rgba(0, 0, 0, 0.05),\n      0 0 6px 1px rgba(0, 0, 0, 0.1),\n      0 0 0 1px rgba(0, 0, 0, 0.1)\n    ",lineHeight:"1.2em",fontFamily:"\n      -apple-system, BlinkMacSystemFont,\n      avenir next, avenir,\n      segoe ui,\n      helvetica neue, helvetica,\n      Ubuntu, roboto, noto, arial, sans-serif\n    ",fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:ln,question:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>',marker:'<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>',street:'<svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.08 14.94 5.625 3.06h1.17l-3.42 11.88H1.08Zm15.885 0L12.42 3.06h-1.17l3.42 11.88h2.295Zm-6.86-1.44H7.946l.128-2.61h1.912l.119 2.61Zm-.217-4.77H8.181l.088-1.8h1.537l.082 1.8ZM9.74 5.49h-1.4l.049-.99h1.306l.045.99Z" fill="currentColor" />\n</svg>',addressMarker:'\x3c!-- TODO: I\'m not sure if the way I added the circle will "scale" properly, need to check that --\x3e\n<svg width="24" height="24" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n  <path fill="none" stroke="currentColor" stroke-width="1.5" d="M4 7a5 5 0 1 1 10 0c0 3.025-3.28 6.713-5 9-1.72-2.287-5-5.975-5-9z"></path>\n    <circle cx="9" cy="7" r="2" fill="currentColor"></circle>\n</svg>',search:'<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">\n  <path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>\n</svg>'},images:{styleToggleDefault:`https://api.mapbox.com/search-js/v${xn}/img/style-toggle-default.jpg`,styleToggleSatellite:`https://api.mapbox.com/search-js/v${xn}/img/style-toggle-satellite.jpg`}};function Mn(e,t={}){const n=Nt(Nt({},kn.variables),t.variables||{});let i=t.cssText||"",r="";for(const[t,s]of Object.entries(n)){if(!Array.isArray(s)){r+=`--${t}: ${s};`;continue}if("mobile"!==s[0]){const e=JSON.stringify(s);throw new Error(`Unsupported expression in theme variables: ${t} ${e}`)}const[,n,o]=s;i+=`@media only screen and (max-width: 767px) { ${e} { --${t}: ${n} !important; } }`,r+=`--${t}: ${o};`}return i+`${e} { ${r} }`}function En(e,t={}){return Nt(Nt({},kn.icons),t.icons||{})[e]}var Sn=class{constructor(e,t,n){Dt(this,wn,void 0),Dt(this,yn,{placement:"bottom-start",flip:!1,offset:10}),this.update=()=>Yt(this,null,(function*(){const e={placement:this.options.placement,middleware:[xe(this.options.offset),this.options.flip&&ye()].filter(Boolean)},{x:t,y:n}=yield((e,t,n)=>(async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=await(null==o.isRTL?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:c,y:u}=de(l,i,a),h=i,d={},p=0;for(let n=0;n<s.length;n++){const{name:f,fn:m}=s[n],{x:g,y:v,data:b,reset:w}=await m({x:c,y:u,initialPlacement:i,placement:h,strategy:r,middlewareData:d,rects:l,platform:o,elements:{reference:e,floating:t}});c=null!=g?g:c,u=null!=v?v:u,d={...d,[f]:{...d[f],...b}},w&&p<=50&&(p++,"object"==typeof w&&(w.placement&&(h=w.placement),w.rects&&(l=!0===w.rects?await o.getElementRects({reference:e,floating:t,strategy:r}):w.rects),({x:c,y:u}=de(l,h,a))),n=-1)}return{x:c,y:u,placement:h,strategy:r,middlewareData:d}})(e,t,{platform:Ve,...n}))(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${t}px`,top:`${n}px`})})),this.referenceEl=e,this.floatingEl=t,Ht(this,wn,Nt(Nt({},zt(this,yn)),n)),this.destroy=function(e,t,n,i){void 0===i&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=i,l=r&&!a,c=s&&!a,u=l||c?[...Te(e)?Xe(e):[],...Xe(t)]:[];u.forEach((e=>{l&&e.addEventListener("scroll",n,{passive:!0}),c&&e.addEventListener("resize",n)}));let h,d=null;if(o){let i=!0;d=new ResizeObserver((()=>{i||n(),i=!1})),Te(e)&&!a&&d.observe(e),d.observe(t)}let p=a?Pe(e):null;return a&&function t(){const i=Pe(e);!p||i.x===p.x&&i.y===p.y&&i.width===p.width&&i.height===p.height||n(),p=i,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{l&&e.removeEventListener("scroll",n),c&&e.removeEventListener("resize",n)})),null==(e=d)||e.disconnect(),d=null,a&&cancelAnimationFrame(h)}}(this.referenceEl,this.floatingEl,this.update)}get options(){return zt(this,wn)}set options(e){Ht(this,wn,Nt(Nt({},zt(this,wn)),e))}};wn=new WeakMap,yn=new WeakMap;var An="*{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{align-items:center;display:flex;padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.SuggestionIcon{margin-right:6px}.SuggestionIcon[aria-hidden=true]{display:none}.ResultsAttribution{padding:var(--paddingFooterLabel)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.SearchBox{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);padding-bottom:0;padding-top:0;position:relative;width:100%}.SearchIcon{fill:#757575;left:.5em}.ActionIcon,.SearchIcon{bottom:0;height:20px;margin:auto 0;position:absolute;top:0;width:20px}.ActionIcon{right:.5em}.ActionIcon>button{background:none;border:none;color:inherit;cursor:pointer;font:inherit;height:100%;outline:inherit;padding:0;width:100%}.ActionIcon>button:hover{background:none!important}.ClearBtn{display:none}.ClearBtn:hover{color:#909090}.LoadingIcon{-moz-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;-webkit-animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;animation:rotate .8s cubic-bezier(.45,.05,.55,.95) infinite;display:none;height:100%}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.Input{background-color:transparent;border:0;color:#404040;color:rgba(0,0,0,.75);font:inherit;height:36px;margin:0;overflow:hidden;padding:0 40px;text-overflow:ellipsis;white-space:nowrap;width:100%}.Input::-ms-clear{display:none}.Input:focus{border:thin dotted;border-radius:var(--borderRadius);box-shadow:none;color:#404040;color:rgba(0,0,0,.75);outline:0}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}",Cn=class extends CustomEvent{constructor(e,t){super(e,{composed:!0,detail:t})}clone(e){const t=new Cn(this.type,this.detail);return e&&Object.defineProperty(t,"target",{value:e}),t}};function Tn(e){const t=e.currentTarget;" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),t.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var Ln,Wn,Bn,In,Rn,On,jn,Pn,Nn,Fn,$n,zn,Dn,Hn,qn,Yn,Un,Xn,Zn="search-listbox__description",Gn=e=>{const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("role","status"),t.setAttribute("style","border: 0px;clip: rect(0px, 0px, 0px, 0px);height: 1px;margin-bottom: -1px;margin-right: -1px;overflow: hidden;padding: 0px;position: absolute;white-space: nowrap;width: 1px;");const n=document.createElement("div");return n.setAttribute("id",`${e}--${Zn}`),t.appendChild(n),t},Vn=(e,t)=>{var n;const i=null!=(n=document.body.querySelector(`[id="${t}--${Zn}"]`))?n:null;i&&(i.textContent=e)},Qn=(e,t)=>{switch(t){case 0:return e.address_line1||e.matching_name||e.feature_name;case 3:return e.name;case 1:return e.place_name.split(",")[0];default:return""}};function Jn(e,t){return`${e}-${t}`}var Kn=class extends bn{constructor(){super(...arguments),Dt(this,Pn),Dt(this,Fn),this.suggestions=null,Dt(this,Ln,null),Dt(this,Wn,void 0),Dt(this,Bn,void 0),Dt(this,In,void 0),Dt(this,Rn,void 0),Dt(this,On,null),Dt(this,jn,void 0),Dt(this,zn,{}),Dt(this,Dn,{}),Dt(this,Hn,(e=>{const{Results:t}=zt(this,Wn),n=e.target;if(n.dataset.mapboxSuccess)return void delete n.dataset.mapboxSuccess;const i=n.value;this.renderAriaMessage(),t.setAttribute("aria-busy","true"),this.dispatchEvent(new Cn("input",i))})),this.renderAriaMessage=()=>{var e;const t=((e,t,n)=>{let i=null;const r=!t||0===t.length;if((null==e?void 0:e.length)<2)i="Type in 2 or more characters for results. When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.";else if(r)i="No search results.";else if(void 0!==n){const e=t[n];s=e.address||e.full_address||e.feature_name,i=`${o=t.length} ${1===o?"result is":"results are"} available. ${s}. ${n+1} of ${o} is selected.`}else i=(e=>`${e} ${1===e?"result is":"results are"} available. Use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.`)(t.length);var s,o;return i})(null==(e=this.input)?void 0:e.value,this.suggestions,this.selectedIndex);Vn(t,this.dataset.seed)},this.clearAriaMessage=()=>{Vn("",this.dataset.seed)},this.handleSuggest=e=>{if(this.suggestions=e,e&&0!==e.length||this.renderAriaMessage(),!e)return void this.hideResults();qt(this,Fn,$n).call(this),e.length&&qt(this,Pn,Nn).call(this);const{Results:t}=zt(this,Wn);t.setAttribute("aria-busy","false")},this.handleError=()=>{const{Results:e}=zt(this,Wn);e.setAttribute("aria-busy","false"),this.hideResults()},Dt(this,qn,(e=>Yt(this,null,(function*(){const t=this.input;t&&(t.dataset.mapboxSuccess="true"),this.dispatchEvent(new Cn("select",e)),this.hideResults()})))),Dt(this,Yn,(()=>{delete this.input.dataset.mapboxSuccess,this.dispatchEvent(new Cn("focus")),this.renderAriaMessage(),qt(this,Pn,Nn).call(this)})),Dt(this,Un,(()=>{document.activeElement!==this.input&&(this.dispatchEvent(new Cn("blur")),this.clearAriaMessage(),this.hideResults())})),this.handleArrowUp=()=>{void 0===this.selectedIndex?this.selectedIndex=this.suggestions.length-1:0===this.selectedIndex?this.selectedIndex=void 0:this.selectedIndex=Math.max(0,this.selectedIndex-1)},this.handleArrowDown=()=>{void 0===this.selectedIndex?this.selectedIndex=0:this.selectedIndex===this.suggestions.length-1?this.selectedIndex=void 0:this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1)},Dt(this,Xn,(e=>{var t;if(null==(t=this.suggestions)?void 0:t.length){if("ArrowDown"===e.key)return e.preventDefault(),void this.handleArrowDown();if("ArrowUp"===e.key)return e.preventDefault(),void this.handleArrowUp();if("Escape"!==e.key){if(void 0!==this.selectedIndex){if("Tab"!==e.key)return"Enter"===e.key?(e.preventDefault(),void zt(this,qn).call(this,this.suggestions[this.selectedIndex])):void 0;zt(this,qn).call(this,this.suggestions[this.selectedIndex])}}else this.hideResults()}}))}get template(){return hn}get templateStyle(){return An}get templateUserStyle(){return Mn(".MapboxSearch",this.theme)}get input(){return zt(this,Rn)}set input(e){const t=zt(this,Rn);t&&(t.removeEventListener("input",zt(this,Hn)),t.removeEventListener("focus",zt(this,Yn)),t.removeEventListener("blur",zt(this,Un)),t.removeEventListener("keydown",zt(this,Xn)),zt(this,Ln)&&zt(this,Ln).destroy()),e&&(e.addEventListener("input",zt(this,Hn)),e.addEventListener("focus",zt(this,Yn)),e.addEventListener("blur",zt(this,Un)),e.addEventListener("keydown",zt(this,Xn)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",zt(this,In)),this.isConnected&&Ht(this,Ln,new Sn(e,zt(this,Wn).Results,this.popoverOptions))),Ht(this,Rn,e)}get searchService(){return zt(this,On)}set searchService(e){Ht(this,On,e)}get selectedIndex(){return zt(this,jn)}set selectedIndex(e){const t=zt(this,jn);Ht(this,jn,e);const{ResultsList:n}=zt(this,Wn),i=Jn(zt(this,In),e);if(void 0!==e?(this.input.setAttribute("aria-activedescendant",i),n.setAttribute("aria-activedescendant",i)):(this.input.removeAttribute("aria-activedescendant"),n.removeAttribute("aria-activedescendant")),t!==e){const r=Jn(zt(this,In),t),s=n.querySelector(`#${r}`);if(null==s||s.removeAttribute("aria-selected"),null==s||s.setAttribute("tabindex","-1"),void 0!==e){const e=n.querySelector(`#${i}`);null==e||e.setAttribute("aria-selected","true"),null==e||e.setAttribute("tabindex","0")}}this.renderAriaMessage()}hideResults(){const{Results:e,ResultsList:t}=zt(this,Wn);e.setAttribute("aria-hidden","true"),this.input.setAttribute("aria-expanded","false"),t.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")}renderItem(e){const t=this.prepareTemplate(dn);return t.id=Jn(zt(this,In),e),t}fillItem(e,t,n,i){const r=e.querySelector('[class$="SuggestionIcon"]'),s=e.querySelector('[class$="SuggestionName"]'),o=e.querySelector('[class$="SuggestionDesc"]');0===this.searchService?(r.innerHTML=En("street"===t.accuracy?"street":"addressMarker",this.theme),r.removeAttribute("aria-hidden")):r.setAttribute("aria-hidden","true"),s.textContent=o.textContent="",s.textContent=Qn(t,this.searchService),o.textContent=((e,t)=>{switch(this.searchService){case 0:return e.description;case 3:return"poi"===e.feature_type?e.full_address:e.place_formatted;case 1:return e.place_name.split(",").splice(1).join(",").trim();default:return""}})(t),n===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected"),e.setAttribute("aria-posinset",(n+1).toString()),e.setAttribute("aria-setsize",i.toString())}get theme(){return zt(this,zn)}set theme(e){Ht(this,zn,e),zt(this,Wn)&&e&&this.updateTemplateUserStyle(Mn(".MapboxSearch",e))}get popoverOptions(){return zt(this,Dn)}set popoverOptions(e){Ht(this,Dn,e),zt(this,Ln)&&(zt(this,Ln).options=e,zt(this,Ln).update())}connectedCallback(){super.connectedCallback(),this.dataSeed=this.dataset.seed,Ht(this,Bn,this.dataset.seed+"-Label"),Ht(this,In,this.dataset.seed+"-ResultsList"),this.input&&this.input.setAttribute("aria-controls",zt(this,In)),Ht(this,Wn,Xt(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));const{Results:e,ResultsList:t,Label:n}=zt(this,Wn);n.id=zt(this,Bn),t.id=zt(this,In),t.setAttribute("aria-labelledby",zt(this,Bn)),e.addEventListener("blur",zt(this,Un)),!zt(this,Ln)&&this.input&&Ht(this,Ln,new Sn(this.input,zt(this,Wn).Results,this.popoverOptions)),requestAnimationFrame((()=>{zt(this,Ln)&&zt(this,Ln).update()}))}disconnectedCallback(){this.input=null;const{Results:e}=zt(this,Wn);e.removeEventListener("blur",zt(this,Un)),zt(this,Ln)&&zt(this,Ln).destroy()}focus(){document.activeElement===this.input?zt(this,Yn).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){zt(this,Ln)&&zt(this,Ln).update()}};Ln=new WeakMap,Wn=new WeakMap,Bn=new WeakMap,In=new WeakMap,Rn=new WeakMap,On=new WeakMap,jn=new WeakMap,Pn=new WeakSet,Nn=function(){if(!this.suggestions||!this.suggestions.length)return;const{Results:e,MapboxSearch:t}=zt(this,Wn),n=this.input.getBoundingClientRect();t.style.setProperty("--width",`${n.width}px`),t.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=void 0},Fn=new WeakSet,$n=function(){const{ResultsList:e}=zt(this,Wn);if(!this.suggestions||!this.suggestions.length)return e.innerHTML="",void this.hideResults();const t=(n=e,Array.from(n.childNodes||[]).filter((e=>e.nodeType===Node.ELEMENT_NODE)));var n;if(this.suggestions.length>t.length)for(let n=t.length;n<this.suggestions.length;n++){const i=this.renderItem(n);t.push(i),i.onmouseenter=()=>{this.selectedIndex=n},i.onmouseleave=()=>{this.selectedIndex=void 0},e.appendChild(i)}if(this.suggestions.length<t.length)for(let e=this.suggestions.length;e<t.length;e++)t[e].remove();for(const e of this.suggestions){const n=this.suggestions.indexOf(e),i=t[n];this.fillItem(i,e,n,this.suggestions.length),i.onclick=()=>{zt(this,qn).call(this,e)}}},zn=new WeakMap,Dn=new WeakMap,Hn=new WeakMap,qn=new WeakMap,Yn=new WeakMap,Un=new WeakMap,Xn=new WeakMap,window.MapboxSearchListbox=Kn,window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",Kn);var ei=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),ti=new Set(["off","on","true","false"]);function ni(e){let t=e.parentNode;for(;t;){if(t instanceof HTMLFormElement)return t;t=t.parentNode}return null}var ii="section-",ri="section-default",si="section-shipping",oi="section-billing";function ai(e){const t=Array.from(e.querySelectorAll("[autocomplete]")).filter((e=>{const t=e.tagName.toLowerCase();return"input"===t||"select"===t||"textarea"===t})),n=[];for(const e of t){if(i=e,"none"===window.getComputedStyle(i).display)continue;const t=e.getAttribute("autocomplete")||"";if(!t||ti.has(t))continue;const r=t.toLowerCase().split(" ");if(r.length>3)continue;const s=r[r.length-1];if(!ei.has(s))continue;r.pop();let o=ri;if(r.length){const e=r[r.length-1];"shipping"===e&&(o=si,r.pop()),"billing"===e&&(o=oi,r.pop())}if(r.length){const e=r[r.length-1];e.startsWith(ii)&&(o=e)}n.push({input:e,section:o,field:s})}var i;return n}function li(e,t){const n=[],i=[],r=ai(e);let s=null;for(const{input:e,section:o,field:a}of r){let r=n.length-1,l=!1;if(n.length?(i[r]!==o||n[r][a])&&(l=!0):l=!0,l){if(s)break;n.push({[a]:e}),i.push(o),r++}else n[r][a]=e;e===t&&(s=n[r])}return null!=s?s:{}}function ci(e,t,n){var i;const r=li(e,t),s=[n.address_line1,n.address_line2,n.address_line3].filter((e=>Boolean(e))).join(", ");Gt(r["street-address"],s),Gt(r["address-line1"],n.address_line1||""),Gt(r["address-level1"],n.address_level1||""),Gt(r["address-level2"],n.address_level2||""),Gt(r["address-level3"],n.address_level3||"");const o=n.country_code||(null==(i=n.metadata)?void 0:i.iso_3166_1)||"";if(r.country&&r.country instanceof HTMLSelectElement){let e=r.country.querySelector("option").value;""===e&&(e=r.country.querySelectorAll("option")[1].value);const t=e===e.toUpperCase();Gt(r.country,t?o.toUpperCase():o)}else Gt(r.country,o);Gt(r["country-name"],n.country||""),Gt(r["postal-code"],n.postcode||"")}function ui(e,t){const n=li(e,t),i={};for(const[e,t]of Object.entries(n))(null==t?void 0:t.value)&&(i[e]=t.value);return i}function hi(e){const t=[];return e["street-address"]?t.push(e["street-address"]):(t.push(e["address-line1"]||""),t.push(e["address-line2"]||""),t.push(e["address-line3"]||"")),t.push(e["address-level3"]||""),t.push(e["address-level2"]||""),t.push(e["address-level1"]||""),t.push(e["postal-code"]||""),e["country-name"]?t.push(e["country-name"]):t.push(e.country||""),t.filter((e=>Boolean(e))).map((e=>e.trim())).join(", ")}function di(e,t){const n=ni(t);if(!n)return;ci(n,t,ae(e));const i=li(n,t);i["address-line2"]&&i["address-line2"].focus()}function pi(e){var t;const n={},i=[e.properties.address_line1,e.properties.address_line2,e.properties.address_line3].filter((e=>Boolean(e))).join(", ");return n["street-address"]=i,n["address-line1"]=e.properties.address_line1,n["address-line2"]=e.properties.address_line2,n["address-line3"]=e.properties.address_line3,n["address-level1"]=e.properties.address_level1,n["address-level2"]=e.properties.address_level2,n["address-level3"]=e.properties.address_level3,n.country=null==(t=e.properties.metadata)?void 0:t.iso_3166_1,n["country-name"]=e.properties.country,n["postal-code"]=e.properties.postcode,n}function fi(e,t){for(const[n,i]of Object.entries(e))if(t[n]!==i)return!0;return!1}var mi=(e,t,n)=>{const i=n?t||"address-line1":"new-password";e&&(e.autocomplete=i)},gi=new class{constructor(){this.feedbackEnabled=!0,this.autofillSessionToken=new T,this.autofillSessionEnabled=!1,this.detectBrowserAutofillEnabled=!1}};Object.defineProperty(gi,"autofillSessionToken",{configurable:!1,writable:!1});var vi,bi,wi,yi,xi=Zt('\n<template>\n  <div class="MapboxAddressConfirmation" aria-hidden="true">\n    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>\n    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>\n  </div>\n</template>\n'),ki=class extends bn{constructor(){super(...arguments),Dt(this,vi,!1),Dt(this,bi,void 0),Dt(this,wi,void 0),Dt(this,yi,{})}get template(){return xi}get templateStyle(){return An}get templateUserStyle(){return Mn(".MapboxAddressConfirmation",this.theme)}get theme(){return zt(this,yi)}set theme(e){if(Ht(this,yi,e),!zt(this,bi)||!e)return;this.updateTemplateUserStyle(Mn(".MapboxAddressConfirmation",e));const{ContentFeature:t,ContentNoFeature:n}=zt(this,bi);t.theme=e,n.theme=e}connectedCallback(){super.connectedCallback(),Ht(this,bi,Xt(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));const{MapboxAddressConfirmation:e}=zt(this,bi);e.setAttribute("aria-hidden","true");const t=this.theme;if(t){const{ContentFeature:e,ContentNoFeature:n}=zt(this,bi);e.theme=t,n.theme=t}}disconnectedCallback(){Ht(this,wi,null)}hide(){var e;if(Ht(this,vi,!1),!zt(this,bi))return;const{MapboxAddressConfirmation:t}=zt(this,bi);t.setAttribute("aria-hidden","true"),null==(e=zt(this,wi))||e.deactivate(),Je().off()}show(e,t,n){return Yt(this,null,(function*(){var i;if(!zt(this,bi))return{type:"cancel"};const{MapboxAddressConfirmation:r,ContentFeature:s,ContentNoFeature:o}=zt(this,bi),{accessToken:a,minimap:l=!1,theme:c,footer:u}=t;this.theme=c,n?(s.removeAttribute("aria-hidden"),o.setAttribute("aria-hidden","true"),s.minimap=l,s.accessToken=a,s.footer=u,s.update(n,e)):(s.setAttribute("aria-hidden","true"),o.removeAttribute("aria-hidden"),o.update(e)),Ht(this,vi,!0),r.removeAttribute("aria-hidden"),Je().on();const h=n?s:o;return Ht(this,wi,function(e,t){var n,i=(null==t?void 0:t.document)||document,r=wt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},o=function(e,t,n){return e&&void 0!==e[t]?e[t]:r[n||t]},a=function(e){return s.containerGroups.findIndex((function(t){var n=t.container,i=t.tabbableNodes;return n.contains(e)||i.find((function(t){return t===e}))}))},l=function(e){var t=r[e];if("function"==typeof t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];t=t.apply(void 0,s)}if(!0===t&&(t=void 0),!t){if(void 0===t||!1===t)return t;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var a=t;if("string"==typeof t&&!(a=i.querySelector(t)))throw new Error("`".concat(e,"` as selector refers to no known node"));return a},c=function(){var e=l("initialFocus");if(!1===e)return!1;if(void 0===e)if(a(i.activeElement)>=0)e=i.activeElement;else{var t=s.tabbableGroups[0];e=t&&t.firstTabbableNode||l("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},u=function(){if(s.containerGroups=s.containers.map((function(e){var t,n,i=ft(e,r.tabbableOptions),s=(t=e,(n=(n=r.tabbableOptions)||{}).getShadowRoot?st([t],n.includeContainer,{filter:ut.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):rt(t,n.includeContainer,ut.bind(null,n)));return{container:e,tabbableNodes:i,focusableNodes:s,firstTabbableNode:i.length>0?i[0]:null,lastTabbableNode:i.length>0?i[i.length-1]:null,nextTabbableNode:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=s.findIndex((function(t){return t===e}));if(!(n<0))return t?s.slice(n+1).find((function(e){return mt(e,r.tabbableOptions)})):s.slice(0,n).reverse().find((function(e){return mt(e,r.tabbableOptions)}))}}})),s.tabbableGroups=s.containerGroups.filter((function(e){return e.tabbableNodes.length>0})),s.tabbableGroups.length<=0&&!l("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},h=function e(t){!1!==t&&t!==i.activeElement&&(t&&t.focus?(t.focus({preventScroll:!!r.preventScroll}),s.mostRecentlyFocusedNode=t,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(t)&&t.select()):e(c()))},d=function(e){var t=l("setReturnFocus",e);return t||!1!==t&&e},p=function(e){var t=At(e);a(t)>=0||(St(r.clickOutsideDeactivates,e)?n.deactivate({returnFocus:r.returnFocusOnDeactivate&&!vt(t,r.tabbableOptions)}):St(r.allowOutsideClick,e)||e.preventDefault())},f=function(e){var t=At(e),n=a(t)>=0;n||t instanceof Document?n&&(s.mostRecentlyFocusedNode=t):(e.stopImmediatePropagation(),h(s.mostRecentlyFocusedNode||c()))},m=function(e){if(function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e)&&!1!==St(r.escapeDeactivates,e))return e.preventDefault(),void n.deactivate();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){var t=At(e);u();var n=null;if(s.tabbableGroups.length>0){var i=a(t),o=i>=0?s.containerGroups[i]:void 0;if(i<0)n=e.shiftKey?s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:s.tabbableGroups[0].firstTabbableNode;else if(e.shiftKey){var c=Et(s.tabbableGroups,(function(e){var n=e.firstTabbableNode;return t===n}));if(c<0&&(o.container===t||vt(t,r.tabbableOptions)&&!mt(t,r.tabbableOptions)&&!o.nextTabbableNode(t,!1))&&(c=i),c>=0){var d=0===c?s.tabbableGroups.length-1:c-1;n=s.tabbableGroups[d].lastTabbableNode}}else{var p=Et(s.tabbableGroups,(function(e){var n=e.lastTabbableNode;return t===n}));if(p<0&&(o.container===t||vt(t,r.tabbableOptions)&&!mt(t,r.tabbableOptions)&&!o.nextTabbableNode(t))&&(p=i),p>=0){var f=p===s.tabbableGroups.length-1?0:p+1;n=s.tabbableGroups[f].firstTabbableNode}}}else n=l("fallbackFocus");n&&(e.preventDefault(),h(n))}(e)},g=function(e){var t=At(e);a(t)>=0||St(r.clickOutsideDeactivates,e)||St(r.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},v=function(){if(s.active)return kt.activateTrap(n),s.delayInitialFocusTimer=r.delayInitialFocus?Mt((function(){h(c())})):h(c()),i.addEventListener("focusin",f,!0),i.addEventListener("mousedown",p,{capture:!0,passive:!1}),i.addEventListener("touchstart",p,{capture:!0,passive:!1}),i.addEventListener("click",g,{capture:!0,passive:!1}),i.addEventListener("keydown",m,{capture:!0,passive:!1}),n},b=function(){if(s.active)return i.removeEventListener("focusin",f,!0),i.removeEventListener("mousedown",p,!0),i.removeEventListener("touchstart",p,!0),i.removeEventListener("click",g,!0),i.removeEventListener("keydown",m,!0),n};return(n={get active(){return s.active},get paused(){return s.paused},activate:function(e){if(s.active)return this;var t=o(e,"onActivate"),n=o(e,"onPostActivate"),r=o(e,"checkCanFocusTrap");r||u(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=i.activeElement,t&&t();var a=function(){r&&u(),v(),n&&n()};return r?(r(s.containers.concat()).then(a,a),this):(a(),this)},deactivate:function(e){if(!s.active)return this;var t=wt({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},e);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,b(),s.active=!1,s.paused=!1,kt.deactivateTrap(n);var i=o(t,"onDeactivate"),a=o(t,"onPostDeactivate"),l=o(t,"checkCanReturnFocus"),c=o(t,"returnFocus","returnFocusOnDeactivate");i&&i();var u=function(){Mt((function(){c&&h(d(s.nodeFocusedBeforeActivation)),a&&a()}))};return c&&l?(l(d(s.nodeFocusedBeforeActivation)).then(u,u),this):(u(),this)},pause:function(){return s.paused||!s.active||(s.paused=!0,b()),this},unpause:function(){return s.paused&&s.active?(s.paused=!1,u(),v(),this):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return s.containers=t.map((function(e){return"string"==typeof e?i.querySelector(e):e})),s.active&&u(),this}}).updateContainerElements(e),n}(r,{fallbackFocus:h,escapeDeactivates:()=>(this.hide(),!0)})),null==(i=zt(this,wi))||i.activate(),new Promise((e=>{const t=h,i=r=>{t.removeEventListener("result",i);const s=r.detail;this.hide(),e("change"===s?{type:"change",feature:n}:{type:s})};t.addEventListener("result",i)}))}))}tryShow(e,t){return Yt(this,null,(function*(){if(!zt(this,bi))return{type:"cancel"};const{accessToken:n,options:i={}}=t,r=new Q(Nt({accessToken:n},i)),s=hi(e),o=(yield r.validate(s,{sessionToken:gi.autofillSessionToken})).features[0];if(o){const e=e=>e.properties.match_code.confidence===ne.exact,{skipConfirmModal:n=e}=t;if(n(o))return{type:"nochange"}}return yield this.show(e,t,o)}))}};vi=new WeakMap,bi=new WeakMap,wi=new WeakMap,yi=new WeakMap,window.MapboxAddressConfirmation=ki,window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",ki);var Mi=new ki;function Ei(e,t){if(t){const n=Zt("\n        <span>\n          <span></span>\n          <br />\n          <span></span>\n        </span>\n      "),[i,r]=Array.from(n.querySelectorAll("span > span")),s=t.split(",");if(i.textContent=s[0].trim(),r.textContent=s.slice(1).join(",").trim(),e["address-line2"]){const t=document.createElement("span");t.textContent=e["address-line2"],n.insertBefore(t,r),n.insertBefore(document.createElement("br"),r)}if(e["address-line3"]){const t=document.createElement("span");t.textContent=e["address-line3"],n.insertBefore(t,r),n.insertBefore(document.createElement("br"),r)}return n}return Zt(`\n        <span>${[e["street-address"]||e["address-line1"]||"",e["address-line2"],e["address-line3"],[e["address-level4"]||"",e["address-level3"]||"",e["address-level2"]||"",`${e["address-level1"]||""} ${e["postal-code"]||""}`,e.country||e["country-name"]||""].filter(Boolean).join(", ")].filter(Boolean).map((e=>`<span>${e}</span>`)).join("<br />")}</span>\n      `)}function Si(e,t,n,i){return Yt(this,null,(function*(){if(!n)return;const r=ni(e),s=Object.values(li(r,e));if(!t.detail.elements.some((e=>s.includes(e))))return;const o=ai(r),a=o.find((t=>t.input===e)),l=a.section,c=Array.from(new Set(o.filter((e=>t.detail.elements.includes(e.input))).map((e=>e.section))));if(!c.includes(l))return;const u="object"==typeof n&&n.sections||[];if(u.length&&!u.some((e=>c.includes(e))))return;let h="object"==typeof n?n:{};h=Ft(Nt({},h),{accessToken:i,sections:[l]}),yield function(e){return Yt(this,arguments,(function*(e,t={}){const{sections:n=[]}=t;Mi.parentNode||document.body.appendChild(Mi);let i={type:"nochange"};const r=function(e){const t=e||document;return Array.from(t.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}(e),s=ai(e),o=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(const a of r){if(n.length){const e=s.find((e=>e.input===a));if(!e)continue;if(!n.includes(e.section))continue}const r=ui(e,a),l=o.find((e=>e.input===a)),c=null==l?void 0:l.autofillHost;if(c){const e=c.retrieveFeature;if(e&&!fi(r,pi(e)))continue}const u=t.accessToken||gi.accessToken,h=yield Mi.tryShow(r,Ft(Nt({},t),{accessToken:u}));if("change"===h.type)if(l)c.simulateRetrieve(h.feature);else{a.dataset.mapboxSuccess="true";const t=ae(h.feature);ci(e,a,t)}"change"===h.type&&"cancel"!==i.type&&(i=h),"cancel"===h.type&&(i=h)}return i}))}(r,h)}))}function Ai(e,t){if(!gi.feedbackEnabled)return;const n=window.location.hostname,i=function(e){return Boolean(e.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}(n)||function(e){return Boolean(un.some((t=>e.includes(t))))}(n)?"https://contribute-api-staging.tilestream.net/v1":"https://contribute-api.mapbox.com/v1",r=`${i}/edit-suggestion/address?access_token=${e}`,{originalCoordinate:s,originalAddress:o,changes:a}=t,l={action:"update",reason:"incorrect_address",location:{longitude:s[0],latitude:s[1]},userEmail:"no-reply-autofill@mapbox.com",changes:a,placeName:o};fetch(r,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${xn}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(l)})}var Ci,Ti,Li,Wi,Bi,Ii,_i,Ri,Oi=Zt('\n<template>\n  <div class="MapboxAddressConfirmationFeature">\n    <div class="Modal" aria-modal="true" role="dialog">\n      <div class="ModalHeader">\n        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>\n        <div class="ModalHeaderTitle">Did you mean?</div>\n        <svg\n          viewBox="0 0 18 18"\n          class="Icon IconClose"\n          tabindex="0"\n          role="button"\n          title="Close"\n          aria-label="Close"\n          aria-expanded="true"\n        ></svg>\n      </div>\n\n      <div class="ModalAddress ModalAddressApprove"></div>\n            \n      <div class="ModalMap">\n        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>\n      </div>\n\n      <div\n        class="Button ButtonPrimary ButtonApprove"\n        tabindex="0"\n        role="button"\n        aria-label="Yes"\n      >\n        Yes\n      </div>\n      \n      <div\n        class="Button ButtonSecondary ButtonReject"\n        tabindex="0"\n        role="button"\n        aria-label="No, use the address I provided"\n      >\n        No, use the address I provided\n      </div>\n\n      <div class="ModalFooter">\n          Your confirmation helps improve address data accuracy.\n      </div>\n    </div>\n  </div>\n</template>\n'),ji=class extends bn{constructor(){super(...arguments),Dt(this,Ci,void 0),Dt(this,Ti,{}),this.minimap=!1,Dt(this,Li,void 0),Dt(this,Wi,void 0),this.update=(e,t)=>{Ht(this,Li,e),Ht(this,Wi,t);const{ModalMap:n,Minimap:i,ModalAddressApprove:r}=zt(this,Ci);if(this.minimap){if(n.removeAttribute("aria-hidden"),i.accessToken=this.accessToken,"object"==typeof this.minimap){const{defaultMapStyle:e,theme:t,mapStyleMode:n,satelliteToggle:r}=this.minimap;e&&(i.defaultMapStyle=this.minimap.defaultMapStyle),t&&(i.theme=this.minimap.theme),n&&(i.mapStyleMode=n),void 0!==r&&(i.satelliteToggle=r)}i.feature=e}else n.setAttribute("aria-hidden","true");const s=e.properties.place_name||e.properties.full_address||e.properties.address;r.innerHTML="",r.appendChild(Ei(t,s))},Dt(this,Bi,(()=>{this.dispatchEvent(new Cn("result","cancel"))})),this.approve=()=>{this.dispatchEvent(new Cn("result","change"))},this.reject=()=>{this.dispatchEvent(new Cn("result","nochange")),Ai(this.accessToken,{originalCoordinate:zt(this,Li).geometry.coordinates,originalAddress:zt(this,Li).properties.full_address,changes:{address:hi(zt(this,Wi))}})},Dt(this,Ii,fn()),Dt(this,_i,fn()),Dt(this,Ri,fn())}get template(){return Oi}get templateStyle(){return An}get templateUserStyle(){return Mn(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return zt(this,Ti)}set theme(e){if(Ht(this,Ti,e),!zt(this,Ci)||!e)return;this.updateTemplateUserStyle(Mn(".MapboxAddressConfirmationFeature",e));const{IconQuestion:t,IconClose:n}=zt(this,Ci);t.innerHTML=En("question",e),n.innerHTML=En("close",e)}set footer(e){if(void 0===e)return;const t=this.querySelector(".ModalFooter");"string"==typeof e?(t.textContent=e,t.removeAttribute("aria-hidden")):e?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),Ht(this,Ci,Xt(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));const{Modal:e,ModalHeaderTitle:t,IconClose:n,ButtonApprove:i,ButtonReject:r,ModalAddressApprove:s}=zt(this,Ci);e.setAttribute("aria-labelledby",zt(this,_i)),e.setAttribute("aria-describedby",zt(this,Ri)),n.setAttribute("aria-controls",zt(this,Ii)),e.id=zt(this,Ii),t.id=zt(this,_i),s.id=zt(this,Ri);const o=Array.from(this.querySelectorAll('[role="button"]'));for(const e of o)e.addEventListener("keydown",Tn);n.addEventListener("click",zt(this,Bi)),i.addEventListener("click",this.approve),r.addEventListener("click",this.reject);const a=this.theme;if(a){const{IconQuestion:e,IconClose:t}=zt(this,Ci);e.innerHTML=En("question",a),t.innerHTML=En("close",a)}}disconnectedCallback(){const{IconClose:e,ButtonApprove:t}=zt(this,Ci);e.removeEventListener("click",zt(this,Bi)),t.removeEventListener("click",this.approve)}};Ci=new WeakMap,Ti=new WeakMap,Li=new WeakMap,Wi=new WeakMap,Bi=new WeakMap,Ii=new WeakMap,_i=new WeakMap,Ri=new WeakMap,window.MapboxAddressConfirmationFeature=ji,window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",ji);var Pi,Ni,Fi,$i,zi,Di,Hi=Zt('\n<template>\n  <div class="MapboxAddressConfirmationNoFeature">\n    <div class="Modal" aria-modal="true" role="dialog">\n      <div class="ModalHeader">\n        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>\n        <div class="ModalHeaderTitle">Confirm address</div>\n        <svg\n          viewBox="0 0 18 18"\n          class="Icon IconClose"\n          tabindex="0"\n          role="button"\n          title="Close"\n          aria-label="Close"\n          aria-expanded="true"\n        ></svg>\n      </div>\n      <div class="ModalDescription">\n        We couldn\'t verify this address. Please check that your information is correct before continuing.\n      </div>\n      <br />\n      <div class="ModalSubheader">\n        You entered\n      </div>\n      <div class="ModalAddress"></div>\n      <div\n        class="Button ButtonPrimary"\n        tabindex="0"\n        role="button"\n        aria-label="Use the address I provided"\n      >\n        Use the address I provided\n      </div>\n    </div>\n  </div>\n</template>\n'),qi=class extends bn{constructor(){super(...arguments),Dt(this,Pi,void 0),Dt(this,Ni,{}),this.update=e=>{const{ModalAddress:t}=zt(this,Pi);t.innerHTML="",t.appendChild(Ei(e))},Dt(this,Fi,(()=>{this.dispatchEvent(new Cn("result","cancel"))})),this.reject=()=>{this.dispatchEvent(new Cn("result","nochange"))},Dt(this,$i,fn()),Dt(this,zi,fn()),Dt(this,Di,fn())}get template(){return Hi}get templateStyle(){return An}get templateUserStyle(){return Mn(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return zt(this,Ni)}set theme(e){if(Ht(this,Ni,e),!zt(this,Pi)||!e)return;this.updateTemplateUserStyle(Mn(".MapboxAddressConfirmationNoFeature",e));const{IconQuestion:t,IconClose:n}=zt(this,Pi);t.innerHTML=En("question",e),n.innerHTML=En("close",e)}connectedCallback(){super.connectedCallback(),Ht(this,Pi,Xt(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));const{Modal:e,ModalHeaderTitle:t,IconClose:n,ModalAddress:i,ButtonReject:r}=zt(this,Pi);e.setAttribute("aria-labelledby",zt(this,zi)),e.setAttribute("aria-describedby",zt(this,Di)),n.setAttribute("aria-controls",zt(this,$i)),e.id=zt(this,$i),t.id=zt(this,zi),i.id=zt(this,Di);const s=Array.from(this.querySelectorAll('[role="button"]'));for(const e of s)e.addEventListener("keydown",Tn);n.addEventListener("click",zt(this,Fi)),r.addEventListener("click",this.reject);const o=this.theme;if(o){const{IconQuestion:e,IconClose:t}=zt(this,Pi);e.innerHTML=En("question",o),t.innerHTML=En("close",o)}}disconnectedCallback(){const{IconClose:e,ButtonReject:t}=zt(this,Pi);e.removeEventListener("click",zt(this,Fi)),t.removeEventListener("click",this.reject)}};Pi=new WeakMap,Ni=new WeakMap,Fi=new WeakMap,$i=new WeakMap,zi=new WeakMap,Di=new WeakMap,window.MapboxAddressConfirmationNoFeature=qi,window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",qi);var Yi,Ui,Xi,Zi,Gi,Vi,Qi,Ji,Ki,er,tr,nr,ir,rr,sr,or,ar="browser-autofilled",lr=[],cr=re((function(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:lr}})),lr=[]}),5);function ur(e){e.hasAttribute(ar)||(e.setAttribute(ar,""),lr.push(e),cr())}function hr(e){e.hasAttribute(ar)&&e.removeAttribute(ar)}function dr(e){"onbrowserautofillstart"===e.animationName?ur(e.target):hr(e.target)}function pr(e){const t=e.target;"select"===t.nodeName.toLowerCase()||e.simulated||e instanceof Cn||"insertReplacementText"!==e.inputType&&"data"in e?hr(t):ur(t)}var fr=class extends bn{constructor(){super(...arguments),Dt(this,Yi,new N),Dt(this,Ui,new oe(zt(this,Yi))),Dt(this,Xi,void 0),Dt(this,Zi,new Kn),Dt(this,Gi,void 0),this.options={},this.confirmOnBrowserAutofill=!1,Dt(this,Vi,!1),Dt(this,Qi,(e=>{const t=(null==e?void 0:e.suggestions)?e.suggestions.filter(((e,t,n)=>{const i=Qn(e,0);return"street"!==e.accuracy||n.findIndex((e=>i===Qn(e,0)))===t})):null;zt(this,Zi).handleSuggest(t),this.dispatchEvent(new Cn("suggest",e))})),Dt(this,Ji,(e=>{zt(this,Zi).handleError(),this.dispatchEvent(new Cn("suggesterror",e))})),Dt(this,Ki,(e=>{var t;if(this.dispatchEvent(new Cn("retrieve",e)),this.retrieveFeature=null==(t=e.features)?void 0:t[0],!zt(this,Xi))return;const n=e;n&&n.features&&n.features.length&&di(n.features[0],zt(this,Xi))})),Dt(this,er,(()=>{var e;try{const t=null!=(e=this.querySelector("input"))?e:null;Ht(this,Xi,t),zt(this,Zi).input=t}catch(e){Ht(this,Xi,null),zt(this,Zi).input=null,console.error(e.message||e)}})),Dt(this,tr,new MutationObserver(zt(this,er))),Dt(this,nr,(e=>{zt(this,Zi).blur(),Si(zt(this,Xi),e,this.confirmOnBrowserAutofill,this.accessToken)})),this.retrieveFeature=null,this.interceptSearch=null,Dt(this,ir,(e=>{this.dispatchEvent(e.clone());const t=e.detail,n=!0===this.browserAutofillEnabled&&(null==t?void 0:t.length)<=2;mi(zt(this,Xi),zt(this,Gi),n);const i=this.interceptSearch&&this.interceptSearch(t),r=this.interceptSearch?i:t;this.interceptSearch&&!i||(null==r?void 0:r.length)<=2?zt(this,Zi).handleSuggest(null):zt(this,Ui).suggest(r,this.options)})),Dt(this,rr,(e=>{const t=e.detail;"street"!==e.detail.accuracy?(mi(zt(this,Xi),zt(this,Gi),!0),zt(this,Ui).retrieve(t,this.options)):((e,t,n)=>{e&&n&&(mi(e,t,!0),di({properties:Ft(Nt({},n),{address_line1:n.address_line1+" ",postcode:null})},e),mi(e,t,!1),null==e||e.focus())})(zt(this,Xi),zt(this,Gi),t)})),Dt(this,sr,(()=>{mi(zt(this,Xi),zt(this,Gi),!0),zt(this,Ui).abort()})),Dt(this,or,(()=>{var e;const t=!0===this.browserAutofillEnabled&&(null==(e=zt(this,Xi).value)?void 0:e.length)<=2;mi(zt(this,Xi),zt(this,Gi),t)}))}get accessToken(){return zt(this,Yi).accessToken}set accessToken(e){zt(this,Yi).accessToken=e}get input(){return zt(this,Xi)}get theme(){return zt(this,Zi).theme}set theme(e){zt(this,Zi).theme=e}get popoverOptions(){return zt(this,Zi).popoverOptions}set popoverOptions(e){zt(this,Zi).popoverOptions=e}get browserAutofillEnabled(){return zt(this,Vi)}set browserAutofillEnabled(e){Ht(this,Vi,e)}connectedCallback(){var e;super.connectedCallback(),gi.autofillSessionEnabled=!0,zt(this,Ui).sessionToken=gi.autofillSessionToken,zt(this,Zi).autofillHost=this,zt(this,Zi).searchService=0;const t=null!=(e=this.querySelector("input"))?e:null;zt(this,tr).observe(this,{subtree:!0,childList:!0}),zt(this,er).call(this),zt(this,Zi).addEventListener("input",zt(this,ir)),zt(this,Zi).addEventListener("select",zt(this,rr)),zt(this,Zi).addEventListener("blur",zt(this,sr)),zt(this,Zi).addEventListener("focus",zt(this,or)),zt(this,Ui).addEventListener("suggest",zt(this,Qi)),zt(this,Ui).addEventListener("suggesterror",zt(this,Ji)),zt(this,Ui).addEventListener("retrieve",zt(this,Ki)),document.body.appendChild(zt(this,Zi)),t&&(t.insertAdjacentElement("beforebegin",Gn(zt(this,Zi).dataSeed)),(e=>{e.name=e.name+" address-search",e.setAttribute("data-lpignore","true")})(t),Ht(this,Gi,t.autocomplete)),gi.detectBrowserAutofillEnabled||(gi.detectBrowserAutofillEnabled=!0,function(e){const t=document.createElement("style");t.innerHTML='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}',document.head.appendChild(t)}(),document.addEventListener("animationstart",dr,!0),document.addEventListener("input",pr,!0)),window.addEventListener("browserautofill",zt(this,nr))}disconnectedCallback(){zt(this,Zi).remove(),zt(this,Zi).removeEventListener("input",zt(this,ir)),zt(this,Zi).removeEventListener("select",zt(this,rr)),zt(this,Zi).removeEventListener("blur",zt(this,sr)),zt(this,Zi).removeEventListener("focus",zt(this,or)),zt(this,Ui).removeEventListener("suggest",zt(this,Qi)),zt(this,Ui).removeEventListener("suggesterror",zt(this,Ji)),zt(this,Ui).removeEventListener("retrieve",zt(this,Ki)),zt(this,tr).disconnect(),window.removeEventListener("browserautofill",zt(this,nr))}attributeChangedCallback(e,t,n){if("access-token"===e)return void(zt(this,Yi).accessToken=n);if("browser-autofill-enabled"===e)return void Ht(this,Vi,Boolean(n));if("theme"===e)return void(this.theme=mn(n));if("popover-options"===e)return void(this.popoverOptions=mn(n));const i=e.split("-").join("_");n||delete this.options[i],this.options[i]=n}focus(){zt(this,Zi).focus()}simulateRetrieve(e){const t=this.input;t&&(t.dataset.mapboxSuccess="true"),zt(this,Zi).hideResults();const n={type:"FeatureCollection",features:[e],url:""};zt(this,Ki).call(this,n)}};Yi=new WeakMap,Ui=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,Gi=new WeakMap,Vi=new WeakMap,Qi=new WeakMap,Ji=new WeakMap,Ki=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap,ir=new WeakMap,rr=new WeakMap,sr=new WeakMap,or=new WeakMap,fr.observedAttributes=["access-token","browser-autofill-enabled","theme","popover-options","css-text","language","country","bbox","limit","proximity","streets"],window.MapboxAddressAutofill=fr,window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",fr);var mr,gr,vr,br,wr,yr,xr,kr,Mr,Er,Sr,Ar,Cr,Tr,Lr,Wr,Br,Ir,_r,Rr,Or,jr={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""}},Pr=class extends bn{constructor(){super(...arguments),Dt(this,xr),Dt(this,mr,void 0),Dt(this,gr,new X({})),Dt(this,vr,new oe(zt(this,gr))),Dt(this,br,null),Dt(this,wr,void 0),Dt(this,yr,new Kn),this.options={},Dt(this,Mr,void 0),Dt(this,Er,(e=>{zt(this,_r).call(this),zt(this,yr).handleSuggest((null==e?void 0:e.suggestions)||null),this.dispatchEvent(new Cn("suggest",e))})),Dt(this,Sr,(e=>{zt(this,_r).call(this),zt(this,yr).handleError(),this.dispatchEvent(new Cn("suggesterror",e))})),Dt(this,Ar,(e=>{zt(this,_r).call(this),this.dispatchEvent(new Cn("retrieve",e));const t=e;if(!t||!t.features.length)return;const n=ae(t.features[0]);zt(this,wr).value=n.name;const i=zt(this,br);if(!i)return;const r=t.features[0];if(!r)return;const s=r.properties.feature_type,o=r.properties.bbox;if(o)i.flyTo(function(e,t,n=.5){const{center:i,zoom:r}=e.cameraForBounds(t);return{center:i,zoom:Math.max(r-n,0),speed:1.4}}(i,C.convert(o).toFlatArray()));else{const e=r.geometry.coordinates,t=function(e){switch(e){case"street":return 15;case"neighborhood":case"postcode":case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}(s);i.flyTo({center:e,zoom:t,speed:1.4})}this.marker&&this.mapboxgl&&zt(this,Lr).call(this,r)})),Dt(this,Cr,void 0),Dt(this,Tr,(()=>{zt(this,Cr)&&(zt(this,Cr).remove(),Ht(this,Cr,null))})),Dt(this,Lr,(e=>{if(!zt(this,br))return;if(zt(this,Tr).call(this),!e)return;const t=Nt(Nt({},{color:"#4668F2"}),"object"==typeof this.marker&&this.marker);Ht(this,Cr,new this.mapboxgl.Marker(t)),e.geometry&&e.geometry.type&&"Point"===e.geometry.type&&e.geometry.coordinates&&zt(this,Cr).setLngLat(e.geometry.coordinates).addTo(zt(this,br))})),this.interceptSearch=null,Dt(this,Wr,(e=>{this.dispatchEvent(e.clone());const t=e.detail;if(!t)return void zt(this,Rr).call(this);const n=this.interceptSearch&&this.interceptSearch(t),i=this.interceptSearch?n:t;!this.interceptSearch||n?(zt(this,vr).suggest(i,this.options),zt(this,_r).call(this,!0)):zt(this,yr).hideResults()})),Dt(this,Br,(e=>{const t=e.detail;zt(this,vr).retrieve(t,this.options),zt(this,_r).call(this,!0)})),Dt(this,Ir,(()=>{zt(this,vr).abort()})),Dt(this,_r,((e=!1)=>{e?(zt(this,mr).ClearBtn.style.display="none",zt(this,mr).LoadingIcon.style.display="block"):(zt(this,mr).LoadingIcon.style.display="none",zt(this,mr).ClearBtn.style.display=this.value?"block":"none")})),Dt(this,Rr,(()=>{this.value="",zt(this,_r).call(this),zt(this,Lr).call(this,null),zt(this,yr).handleSuggest(null)})),this.marker=!0,Dt(this,Or,(()=>{const e=zt(this,br),t=Nt({},this.options);if(e.getZoom()<=9)return delete t.proximity,void(this.options=t);const n=e.getCenter();this.options=Ft(Nt({},t),{proximity:n})}))}get accessToken(){return zt(this,gr).accessToken}set accessToken(e){zt(this,gr).accessToken=e}get value(){return zt(this,wr).value}set value(e){zt(this,wr).value=e}get input(){return zt(this,wr)}get template(){return pn}get templateStyle(){return An}get templateUserStyle(){return Mn(".SearchBox",zt(this,yr).theme)}get theme(){return zt(this,yr).theme}set theme(e){if(zt(this,yr).theme=e,!zt(this,mr)||!e)return;this.updateTemplateUserStyle(Mn(".SearchBox",e)),zt(this,yr).updatePopover();const{SearchIcon:t}=zt(this,mr);t.innerHTML=En("search",e)}get popoverOptions(){return zt(this,yr).popoverOptions}set popoverOptions(e){zt(this,yr).popoverOptions=e}get placeholder(){return zt(this,Mr)||qt(this,xr,kr).call(this)}set placeholder(e){Ht(this,Mr,e),zt(this,wr)&&(zt(this,wr).placeholder=this.placeholder,zt(this,wr).setAttribute("aria-label",this.placeholder))}connectedCallback(){super.connectedCallback(),Ht(this,mr,Xt(this,{SearchBox:".SearchBox",SearchIcon:".SearchIcon",Input:".Input",ClearBtn:".ClearBtn",LoadingIcon:".LoadingIcon"})),this.theme=Nt({},this.theme);const{Input:e,ClearBtn:t}=zt(this,mr);Ht(this,wr,e),zt(this,yr).input=e,zt(this,yr).searchService=3,zt(this,yr).addEventListener("input",zt(this,Wr)),zt(this,yr).addEventListener("select",zt(this,Br)),zt(this,yr).addEventListener("blur",zt(this,Ir)),zt(this,vr).addEventListener("suggest",zt(this,Er)),zt(this,vr).addEventListener("suggesterror",zt(this,Sr)),zt(this,vr).addEventListener("retrieve",zt(this,Ar)),t.addEventListener("click",zt(this,Rr)),this.placeholder=zt(this,Mr),document.body.appendChild(zt(this,yr)),e&&(e.previousElementSibling.hasAttribute("aria-live")&&e.previousElementSibling.remove(),e.insertAdjacentElement("beforebegin",Gn(zt(this,yr).dataSeed)))}disconnectedCallback(){zt(this,yr).remove(),zt(this,yr).input=null,zt(this,yr).removeEventListener("input",zt(this,Wr)),zt(this,yr).removeEventListener("select",zt(this,Br)),zt(this,yr).removeEventListener("blur",zt(this,Ir)),zt(this,vr).removeEventListener("suggest",zt(this,Er)),zt(this,vr).removeEventListener("suggesterror",zt(this,Sr)),zt(this,vr).removeEventListener("retrieve",zt(this,Ar))}attributeChangedCallback(e,t,n){if("access-token"===e)return void(zt(this,gr).accessToken=n);if("theme"===e)return void(this.theme=mn(n));if("popover-options"===e)return void(this.popoverOptions=mn(n));if("placeholder"===e)return void(this.placeholder=n);const i=e.split("-").join("_");n||delete this.options[i],this.options[i]=n,"language"===i&&(this.placeholder=zt(this,Mr))}focus(){zt(this,yr).focus()}search(e){this.value=e,zt(this,Wr).call(this,new Cn("input",e))}bindMap(e){zt(this,br)&&zt(this,br).off("moveend",zt(this,Or)),e&&e.on("moveend",zt(this,Or)),Ht(this,br,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();const t=document.createElement("div");return t.className="mapboxgl-ctrl",t.style.width="300px",t.appendChild(this),t}onRemove(){this.remove(),this.unbindMap(),zt(this,Tr).call(this)}getDefaultPosition(){return"top-right"}};mr=new WeakMap,gr=new WeakMap,vr=new WeakMap,br=new WeakMap,wr=new WeakMap,yr=new WeakMap,xr=new WeakSet,kr=function(){if(this.options.language){const e=this.options.language.split(",")[0],t=Tt().language(e),n=jr.placeholder[t];if(n)return n}return"Search"},Mr=new WeakMap,Er=new WeakMap,Sr=new WeakMap,Ar=new WeakMap,Cr=new WeakMap,Tr=new WeakMap,Lr=new WeakMap,Wr=new WeakMap,Br=new WeakMap,Ir=new WeakMap,_r=new WeakMap,Rr=new WeakMap,Or=new WeakMap,Pr.observedAttributes=["access-token","theme","popover-options","placeholder","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"],window.MapboxSearchBox=Pr,window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",Pr);var Nr,Fr,$r,zr,Dr,Hr,qr,Yr,Ur,Xr,Zr,Gr,Vr,Qr,Jr=new(Wt())({size:512,antimeridian:!0}),Kr=1280;function es(e,t){const{width:n,height:i}=Vt(e,!0);switch(t){case"center":return[0,0];case"top":return[0,i/2];case"bottom":return[0,-1*i/2];case"left":return[n/2,0];case"right":return[-1*n/2,0];case"top-left":return[n/2,i/2];case"top-right":return[-1*n/2,i/2];case"bottom-left":return[n/2,-1*i/2];case"bottom-right":return[-1*n/2,-1*i/2]}}var ts=class{constructor(e,t,n,i,r,s){Dt(this,Nr,void 0),Dt(this,Fr,(()=>{[this.anchorOffsetX,this.anchorOffsetY]=es(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}})),Dt(this,$r,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0}),Dt(this,zr,!1),Dt(this,Dr,void 0),Dt(this,Hr,(e=>{this.isActive&&(e.preventDefault(),e.stopPropagation(),zt(this,Gr).call(this,e),window.addEventListener("pointermove",zt(this,Yr)),window.addEventListener("pointerup",zt(this,qr)))})),Dt(this,qr,(()=>{window.removeEventListener("pointermove",zt(this,Yr)),window.removeEventListener("pointerup",zt(this,qr))})),Dt(this,Yr,(e=>{e.preventDefault(),e.stopPropagation();const t=this.curPointerXPos-e.pageX,n=this.curPointerYPos-e.pageY;this.markerDeltaX+=t,this.markerDeltaY-=n,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);const i=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],r=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],s=this.markerDeltaX-i,o=this.markerDeltaY+r;this.markerTransform={globalX:s,globalY:o},zt(this,Gr).call(this,e)})),Dt(this,Ur,(e=>{this.isActive&&(e.preventDefault(),e.stopPropagation(),zt(this,Gr).call(this,e),window.addEventListener("pointermove",zt(this,Zr)),window.addEventListener("pointerup",zt(this,Xr)))})),Dt(this,Xr,(()=>{window.removeEventListener("pointermove",zt(this,Zr)),window.removeEventListener("pointerup",zt(this,Xr))})),Dt(this,Zr,(e=>{e.preventDefault();let t=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));t=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,t),0);let n=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));n=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,n),0),this.imgContainerElement.scrollTop=t,this.imgContainerElement.scrollLeft=n;const i=Math.round(n-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),r=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-t);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+i,this.imgCenterPx[1]-r],!this.keepMarkerCentered){const e=this.markerDeltaX+i,t=this.markerDeltaY+r;this.markerTransform={globalX:e,globalY:t}}zt(this,Qr).call(this,n,t),zt(this,Gr).call(this,e)})),Dt(this,Gr,(e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY})),Dt(this,Vr,(()=>{const{anchorX:e,anchorY:t,globalX:n,globalY:i,correctionX:r,correctionY:s}=zt(this,$r),o=e-n+r,a=t+i+s;this.markerElement.style.transform=`translate(calc(-50% + ${o}px), calc(-50% + ${a}px))`})),this.reCenter=()=>{const e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,t=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=t,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}},this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;const e=this.imgCenterOffset.x,t=this.imgCenterOffset.y,n=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,i=this.imgElement.height/2-t-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=n,this.imgContainerElement.scrollTop=i,zt(this,Qr).call(this,n,i)},Dt(this,Qr,((e,t)=>{const n=this.imgCenterOffset.x,i=this.imgCenterOffset.y,{correctionX:r,correctionY:s}=this.markerTransform,o={};if(e/2<-1*n){const t=-1*n-e/2;o.correctionX=2*t}else e<0?o.correctionX=e:0!==r&&(o.correctionX=0);if(t/2<-1*i){const e=-1*i-t/2;o.correctionY=2*e}else t<0?o.correctionY=t:0!==s&&(o.correctionY=0);this.markerTransform=o})),this.markerElement=n,this.imgContainerElement=e,this.imgElement=t,this.keepMarkerCentered=i,this.zoom=r,this.anchor=s,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",zt(this,Ur)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",zt(this,Hr)),new ResizeObserver(zt(this,Fr)).observe(this.markerElement)}get anchor(){return zt(this,Nr)}set anchor(e){Ht(this,Nr,e),[this.anchorOffsetX,this.anchorOffsetY]=es(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return zt(this,$r)}set markerTransform(e){Ht(this,$r,Nt(Nt({},zt(this,$r)),e)),zt(this,Vr).call(this)}get isActive(){return zt(this,zr)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",Ht(this,zr,e)}get coordinate(){const e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(gn(e,this.imgCenterPx))return zt(this,Dr);{const t=Jr.ll(e,this.zoom);return[vn(t[0],6),vn(t[1],6)]}}set coordinate(e){Ht(this,Dr,e),this.imgCenterPx=this.imgCenterAdjustedPx=Jr.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};Nr=new WeakMap,Fr=new WeakMap,$r=new WeakMap,zr=new WeakMap,Dr=new WeakMap,Hr=new WeakMap,qr=new WeakMap,Yr=new WeakMap,Ur=new WeakMap,Xr=new WeakMap,Zr=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,Qr=new WeakMap;var ns,is,rs,ss,os,as,ls,cs,us,hs,ds,ps,fs,ms,gs,vs,bs,ws,ys,xs,ks,Ms,Es,Ss,As,Cs,Ts,Ls,Ws,Bs,Is,_s,Rs,Os,js=Zt('\n<template>\n  <div class="MapboxAddressMinimap" aria-hidden="true">\n    <div class="MinimapImageContainer">\n      <img class="MinimapImage" draggable="false"></img>\n      <div class="MinimapInnerFrame">\n        <div class="MinimapMarker"></div>\n        <div class="MinimapAttribution">\n          <div class="MinimapAttributionLogo">\n            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">\n              <svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>\n            </a>\n          </div>\n          <div class="MinimapAttributionText">\n            <a target="_blank" href=\'https://www.mapbox.com/about/maps/\'> Mapbox</a><a target="_blank" href=\'http://www.openstreetmap.org/copyright\'> OpenStreetMap</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'),Ps=Zt('\n<template>\n  <button type="button" class="MinimapStyleToggle"></button>\n</template>\n'),Ns=Zt('\n<template>\n  <div class="MinimapFooter">Adjust the marker on the map if it doesn\'t precisely match your location. This helps improve address data quality.</div>\n</template>\n'),Fs="Adjust pin",$s="Save",zs="Cancel",Ds=Zt(`\n<template>\n  <div class="MinimapEditButtons">\n    <div class="Button ButtonPrimary MinimapButtonAdjust">${Fs}</div>\n    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">${$s}</div>\n    <div class="Button MinimapButtonCancel" aria-hidden="true">${zs}</div>\n  </div>\n</template>\n`),Hs=class extends bn{constructor(){super(...arguments),Dt(this,ns,!1),this.keepMarkerCentered=!1,this.markerAnchor="bottom",Dt(this,is,!1),Dt(this,rs,!1),Dt(this,ss,void 0),Dt(this,os,""),Dt(this,as,void 0),Dt(this,ls,void 0),Dt(this,cs,void 0),Dt(this,us,void 0),Dt(this,hs,void 0),Dt(this,ds,{}),Dt(this,ps,!1),Dt(this,fs,"default"),Dt(this,ms,void 0),Dt(this,gs,void 0),Dt(this,vs,void 0),Dt(this,bs,["mapbox","streets-v11"]),Dt(this,ws,void 0),Dt(this,ys,void 0),Dt(this,xs,(()=>{const{ImageContainer:e,ButtonAdjust:t,ButtonSave:n,ButtonCancel:i}=zt(this,cs);zt(this,is)?(e.classList.add(`${this.dataset.seed}--draggable`),zt(this,us).isActive=!0,t.setAttribute("aria-hidden","true"),n.removeAttribute("aria-hidden"),i.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),zt(this,us).isActive=!1,t.removeAttribute("aria-hidden"),n.setAttribute("aria-hidden","true"),i.setAttribute("aria-hidden","true"))})),Dt(this,ks,(()=>{Ht(this,is,!0),zt(this,xs).call(this)})),Dt(this,Ms,(()=>{if(this.feature.properties.full_address&&!gn(this.feature.geometry.coordinates,zt(this,us).coordinate)){const[e,t]=zt(this,us).coordinate;Ai(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:t}}})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(zt(this,us).coordinate),Ht(this,is,!1),zt(this,xs).call(this)})),Dt(this,Es,(()=>{zt(this,us).reCenter(),Ht(this,is,!1),zt(this,xs).call(this)})),Dt(this,Ss,(()=>{this.mapStyleMode="default"===this.mapStyleMode?"satellite":"default"})),Dt(this,As,(()=>{zt(this,rs)||zt(this,us).reCenter(),Ht(this,rs,!0),zt(this,us)&&zt(this,us).handleMinimapResize()})),Dt(this,Cs,(()=>{Ht(this,rs,!1)})),Dt(this,Ts,(e=>{if(0===zt(this,as)||0===zt(this,ls))return"";const[t,n]=this.defaultMapStyle,i=rn(t,n),r="default"===this.mapStyleMode?i:cn,s="20d01"+gi.autofillSessionToken.toString();let o=r+A.convert(e).toArray().join(",")+",16,0/"+Math.min(2*zt(this,as),Kr)+"x"+Math.min(2*zt(this,ls),Kr)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return gi.autofillSessionEnabled&&(o+=`&sku=${s}`),o})),Dt(this,Ls,(()=>{if(zt(this,ss)){const e=zt(this,ss).geometry.coordinates;Ht(this,os,zt(this,Ts).call(this,e));const{Image:t}=zt(this,cs);t.src=zt(this,os)}})),Dt(this,Ws,(e=>`url("${function(e,t={}){return Nt(Nt({},kn.images),t.images||{})[e]}("default"===e?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`)),Dt(this,Bs,(()=>{const{MapboxAddressMinimap:e,ImageContainer:t,Image:n}=zt(this,cs),{width:i,height:r}=Vt(this.container),[s,o]=[zt(this,as),zt(this,ls)];Ht(this,as,Math.min(i,Kr)),Ht(this,ls,Math.min(r,Kr)),e.style.setProperty("width",`${zt(this,as)}px`),e.style.setProperty("height",`${zt(this,ls)}px`),t.style.setProperty("height",`${zt(this,ls)}px`),t.style.setProperty("width",`${zt(this,as)}px`);const[a,l]=[n.width,n.height];zt(this,as)>s&&zt(this,as)>a/2&&a<Kr||zt(this,ls)>o&&zt(this,ls)>l/2&&l<Kr?zt(this,Ls).call(this):zt(this,us)&&zt(this,us).handleMinimapResize()})),Dt(this,Is,(()=>{if(this.querySelector(".MinimapFooter"))return;const e=this.prepareTemplate(Ns),t=this.querySelector(".MapboxAddressMinimap");if(!t)return;if(t.appendChild(e),this.querySelector(".MinimapEditButtons"))return;const n=this.prepareTemplate(Ds);this.querySelector(".MinimapInnerFrame").appendChild(n),Ht(this,cs,Ft(Nt({},zt(this,cs)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));const{ButtonAdjust:i,ButtonSave:r,ButtonCancel:s}=zt(this,cs);i.addEventListener("click",zt(this,ks)),r.addEventListener("click",zt(this,Ms)),s.addEventListener("click",zt(this,Es))})),Dt(this,_s,(()=>{if(!zt(this,cs))return;const{EditButtons:e,ButtonAdjust:t,ButtonSave:n,ButtonCancel:i}=zt(this,cs),r=this.querySelector(".MinimapFooter");null==r||r.remove(),null==e||e.remove(),t&&(t.remove(),t.removeEventListener("click",zt(this,ks))),n&&(n.remove(),n.removeEventListener("click",zt(this,Ms))),i&&(i.remove(),i.removeEventListener("click",zt(this,Es))),delete zt(this,cs).EditButtons,delete zt(this,cs).ButtonAdjust,delete zt(this,cs).ButtonSave,delete zt(this,cs).ButtonCancel})),Dt(this,Rs,(()=>{if(this.querySelector(".MinimapStyleToggle"))return;const e=this.prepareTemplate(Ps),t=this.querySelector(".MinimapInnerFrame");t&&(t.appendChild(e),zt(this,cs).MapStyleToggle=e,e.addEventListener("click",zt(this,Ss)),e.style.backgroundImage=zt(this,Ws).call(this,"default"===this.mapStyleMode?"satellite":"default"),e.setAttribute("title","Switch to "+("default"===this.mapStyleMode?"Satellite":"Default")))})),Dt(this,Os,(()=>{if(!zt(this,cs))return;const{MapStyleToggle:e}=zt(this,cs);e&&(e.remove(),e.removeEventListener("click",zt(this,Ss)),delete zt(this,cs).MapStyleToggle)}))}get canAdjustMarker(){return zt(this,ns)}set canAdjustMarker(e){Ht(this,ns,e),e?zt(this,Is).call(this):zt(this,_s).call(this)}get accessToken(){return zt(this,hs)||gi.accessToken}set accessToken(e){Ht(this,hs,e)}get feature(){return zt(this,ss)}set feature(e){Ht(this,ss,e),e?this.show():this.hide()}get template(){return js}get templateStyle(){return An}get templateUserStyle(){return Mn(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return zt(this,ps)}set satelliteToggle(e){Ht(this,ps,e),e?zt(this,Rs).call(this):zt(this,Os).call(this)}get theme(){return zt(this,ds)}set theme(e){if(Ht(this,ds,e),!zt(this,cs)||!e)return;this.updateTemplateUserStyle(Mn(".MapboxAddressMinimap",e));const{Marker:t,MapStyleToggle:n}=zt(this,cs);t.innerHTML=En("marker",e),n&&(n.style.backgroundImage=zt(this,Ws).call(this,"default"===this.mapStyleMode?"satellite":"default"))}get adjustBtnText(){return zt(this,ms)||Fs}set adjustBtnText(e){Ht(this,ms,e),this.querySelector(".MinimapButtonAdjust").textContent=e||Fs}get saveBtnText(){return zt(this,gs)||$s}set saveBtnText(e){Ht(this,gs,e),this.querySelector(".MinimapButtonSave").textContent=e||$s}get cancelBtnText(){return zt(this,vs)||zs}set cancelBtnText(e){Ht(this,vs,e),this.querySelector(".MinimapButtonCancel").textContent=e||zs}get mapStyleMode(){return zt(this,fs)}set mapStyleMode(e){const t=zt(this,fs);if(t===e)return;if(Ht(this,fs,e),!zt(this,cs))return;const{MapStyleToggle:n}=zt(this,cs);n&&(n.style.backgroundImage=zt(this,Ws).call(this,t),n.setAttribute("title","Switch to "+("satellite"===t?"Satellite":"Default")),zt(this,Ls).call(this))}get defaultMapStyle(){return zt(this,bs)}set defaultMapStyle(e){Ht(this,bs,e),zt(this,Ls).call(this)}get footer(){return zt(this,ws)}set footer(e){Ht(this,ws,e);const t=this.querySelector(".MinimapFooter");t&&("string"==typeof e?(t.textContent=e,t.removeAttribute("aria-hidden")):e?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden","true"))}get container(){return zt(this,ys)}set container(e){e&&(e.style.position="relative",Ht(this,ys,e))}show(){if(!zt(this,ss))return;const e=zt(this,ss).geometry.coordinates;zt(this,us).coordinate=e,Ht(this,os,zt(this,Ts).call(this,e));const{MapboxAddressMinimap:t,Image:n}=zt(this,cs);n.src=zt(this,os),t.removeAttribute("aria-hidden")}hide(){const{MapboxAddressMinimap:e}=zt(this,cs);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),Ht(this,cs,Xt(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=zt(this,fs),this.theme=Nt({},this.theme),this.canAdjustMarker&&zt(this,Is).call(this),this.satelliteToggle&&zt(this,Rs).call(this),this.container=this.parentElement,new ResizeObserver(zt(this,Bs)).observe(this.container),zt(this,Bs).call(this);const{MapboxAddressMinimap:e,ImageContainer:t,Image:n,Marker:i}=zt(this,cs);Ht(this,us,new ts(t,n,i,this.keepMarkerCentered,16,this.markerAnchor)),zt(this,us).reCenter(),n.onload=zt(this,As),n.onerror=zt(this,Cs),n.src=zt(this,os),zt(this,ss)?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden","true")}attributeChangedCallback(e,t,n){if("access-token"===e)this.accessToken=n;else if("can-adjust-marker"===e)this.canAdjustMarker="true"===n;else if("keep-marker-centered"===e)this.keepMarkerCentered="true"===n;else if("marker-anchor"===e){const e=n;this.markerAnchor=e,zt(this,us)&&(zt(this,us).anchor=e)}else"satellite-toggle"===e&&(this.satelliteToggle="true"===n)}};ns=new WeakMap,is=new WeakMap,rs=new WeakMap,ss=new WeakMap,os=new WeakMap,as=new WeakMap,ls=new WeakMap,cs=new WeakMap,us=new WeakMap,hs=new WeakMap,ds=new WeakMap,ps=new WeakMap,fs=new WeakMap,ms=new WeakMap,gs=new WeakMap,vs=new WeakMap,bs=new WeakMap,ws=new WeakMap,ys=new WeakMap,xs=new WeakMap,ks=new WeakMap,Ms=new WeakMap,Es=new WeakMap,Ss=new WeakMap,As=new WeakMap,Cs=new WeakMap,Ts=new WeakMap,Ls=new WeakMap,Ws=new WeakMap,Bs=new WeakMap,Is=new WeakMap,_s=new WeakMap,Rs=new WeakMap,Os=new WeakMap,Hs.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"],window.MapboxAddressMinimap=Hs,window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",Hs),new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,t().forwardRef(((n,i)=>{const{accessToken:r,options:s,theme:o,popoverOptions:a,confirmOnBrowserAutofill:l,browserAutofillEnabled:c,children:u,onChange:h,onSuggest:d,onSuggestError:p,onRetrieve:f,interceptSearch:m}=n,g=(0,e.useRef)();return(0,e.useImperativeHandle)(i,(()=>({focus:()=>{if(g.current)return g.current.focus();throw new Error("AddressAutofill is not mounted")}}))),(0,e.useEffect)((()=>{g.current&&(g.current.options=s)}),[g.current,s]),(0,e.useEffect)((()=>{g.current&&(g.current.interceptSearch=m)}),[g.current,s]),(0,e.useEffect)((()=>{g.current&&(g.current.theme=o)}),[g.current,o]),(0,e.useEffect)((()=>{g.current&&(g.current.popoverOptions=a)}),[g.current,a]),(0,e.useEffect)((()=>{g.current&&(g.current.confirmOnBrowserAutofill=l)}),[g.current,l]),(0,e.useEffect)((()=>{g.current&&(g.current.browserAutofillEnabled=c)}),[g.current,c]),(0,e.useEffect)((()=>{const e=g.current;if(!e)return;if(!d)return;const t=e=>d(e.detail);return e.addEventListener("suggest",t),()=>{e.removeEventListener("suggest",t)}}),[g.current,d]),(0,e.useEffect)((()=>{const e=g.current;if(!e)return;if(!p)return;const t=e=>p(e.detail);return e.addEventListener("suggesterror",t),()=>{e.removeEventListener("suggesterror",t)}}),[g.current,p]),(0,e.useEffect)((()=>{const e=g.current;if(!e)return;if(!f)return;const t=e=>f(e.detail);return e.addEventListener("retrieve",t),()=>{e.removeEventListener("retrieve",t)}}),[g.current,f]),(0,e.useEffect)((()=>{const e=g.current;if(!e)return;if(!h)return;const t=e=>{e.target===e.currentTarget&&h(e.detail)};return e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}}),[g.current,h]),(0,e.useEffect)((()=>{g.current&&(g.current.accessToken=r)}),[g.current,r]),t().createElement("mapbox-address-autofill",{ref:g},u)}));var qs=t().forwardRef(((n,i)=>{const{accessToken:r,options:s,theme:o,popoverOptions:a,placeholder:l,map:c,marker:u,mapboxgl:h,value:d,onChange:p,onSuggest:f,onSuggestError:m,onRetrieve:g,interceptSearch:v}=n,b=(0,e.useRef)();return(0,e.useImperativeHandle)(i,(()=>({focus:()=>{if(b.current)return b.current.focus();throw new Error("SearchBox is not mounted")},search:e=>{if(b.current)return b.current.search(e);throw new Error("SearchBox is not mounted")}}))),(0,e.useEffect)((()=>{b.current&&(b.current.options=s||{})}),[b.current,s]),(0,e.useEffect)((()=>{b.current&&(b.current.interceptSearch=v)}),[b.current,v]),(0,e.useEffect)((()=>{b.current&&(b.current.theme=o)}),[b.current,o]),(0,e.useEffect)((()=>{b.current&&(b.current.popoverOptions=a)}),[b.current,a]),(0,e.useEffect)((()=>{b.current&&(b.current.placeholder=l)}),[b.current,l]),(0,e.useEffect)((()=>{b.current&&(b.current.value=d)}),[b.current,d]),(0,e.useEffect)((()=>{const e=b.current;if(e)return e.bindMap(c),()=>{e.unbindMap()}}),[b.current,c]),(0,e.useEffect)((()=>{b.current&&(b.current.marker=u)}),[b.current,u]),(0,e.useEffect)((()=>{b.current&&(b.current.mapboxgl=h)}),[b.current,h]),(0,e.useEffect)((()=>{const e=b.current;if(!e)return;if(!f)return;const t=e=>f(e.detail);return e.addEventListener("suggest",t),()=>{e.removeEventListener("suggest",t)}}),[b.current,f]),(0,e.useEffect)((()=>{const e=b.current;if(!e)return;if(!m)return;const t=e=>m(e.detail);return e.addEventListener("suggesterror",t),()=>{e.removeEventListener("suggesterror",t)}}),[b.current,m]),(0,e.useEffect)((()=>{const e=b.current;if(!e)return;if(!g)return;const t=e=>g(e.detail);return e.addEventListener("retrieve",t),()=>{e.removeEventListener("retrieve",t)}}),[b.current,g]),(0,e.useEffect)((()=>{const e=b.current;if(!e)return;if(!p)return;const t=e=>{e.target===e.currentTarget&&p(e.detail)};return e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}}),[b.current,p]),(0,e.useEffect)((()=>{b.current&&(b.current.accessToken=r)}),[b.current,r]),t().createElement("mapbox-search-box",{ref:b})}));N.defaults,X.defaults;const Ys=JSON.parse('{"UU":"wmf-reports/marker"}');(0,i.registerBlockType)(Ys.UU,{edit:function({attributes:t,setAttributes:n}){const{lat:i,long:a}=t;return(0,e.createElement)("div",{...(0,s.useBlockProps)({className:"carousel__slide"})},(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(o.PanelBody,null,(0,e.createElement)(o.BaseControl,{help:(0,r.__)("Search for the address to update the longitude and latitude","wmf-reports"),id:"search-box",label:(0,r.__)("Search for address","wmf-reports")},(0,e.createElement)(qs,{accessToken:wmf?.apiKey,value:"",onRetrieve:e=>{const{coordinates:t}=e?.features?.[0]?.geometry||[-13.326915886961197,25.093160453432485];n({lat:t[1],long:t[0]})}})),(0,e.createElement)(o.TextControl,{help:(0,r.__)("Update the latitude, use the search, or drag the marker to pin point a location.","wmf-reports"),label:(0,r.__)("Latitude","wmf-reports"),value:i,onChange:e=>{n({lat:e})}}),(0,e.createElement)(o.TextControl,{help:(0,r.__)("Update the longitude, use the search, or drag the marker to pin point a location.","wmf-reports"),label:(0,r.__)("Longitude","wmf-reports"),value:a,onChange:e=>{n({long:e})}}))),(0,e.createElement)(s.InnerBlocks,{template:[["core/group",{align:"full",backgroundColor:"wmf-report-bright-yellow",className:"carousel-slide",layout:{type:"constrained"}},[["core/columns",{align:"wide"},[["core/column",{width:"66.66%"},[["core/image",{aspectRatio:"4/3",className:"is-style-default carousel-slide__image",id:74197,lightbox:{aspectRatio:"4/3",className:"is-style-default carousel-slide__image",enabled:!1,id:74197,linkDestination:"none",scale:"cover",sizeSlug:"full",url:"/wp-content/uploads/2024/01/Wikimedia_Foundation_AI_Blog_Series_Header.png"},linkDestination:"none",scale:"cover",sizeSlug:"full",url:"/wp-content/uploads/2024/01/Wikimedia_Foundation_AI_Blog_Series_Header.png"}]]],["core/column",{width:"33.33%"},[["core/paragraph",{className:"carousel-slide__category is-style-sans-p",content:"Lorem ipsum / Sit amet",style:{elements:{link:{color:{text:"var:preset|color|orange"}}}},textColor:"orange"}],["core/heading",{className:"carousel-slide__heading is-style-default",content:"Lorem ipsum dolor sit amet vulputate."}],["core/paragraph",{className:"carousel-slide__location is-style-sans-p",content:"<em>Line for location</em>"}],["core/paragraph",{className:"is-style-sans-p",content:"Lorem ipsum dolor sit amet ullamcorper convallis condimentum suspendisse cras blandit congue tincidunt turpis vulputate. Imperdiet quisque libero in porta venenatis vitae netus condimentum."}],["core/buttons",{},[["core/button",{backgroundColor:"base100",className:"is-style-tertiary carousel-slide__button",text:"Read More",style:{elements:{link:{color:{text:"var:preset|color|base0"}}}},textColor:"base10"}]]]]]]]]]]}))},save:()=>(0,e.createElement)(s.InnerBlocks.Content,null)})})()})();