(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,o=window.wp.components,n=window.wp.i18n,s=window.ReactJSXRuntime,l=()=>{},a=({color:e=null,label:o="",onColorChange:n=l,clientId:a})=>{const r=(0,t.__experimentalUseMultipleOriginColorsAndGradients)(),i=[{colorValue:e,onColorChange:n,label:o}];return(0,s.jsx)(t.InspectorControls,{group:"color",children:(0,s.jsx)(t.__experimentalColorGradientSettingsDropdown,{settings:i,panelId:a,hasColorsOrGradients:!1,__experimentalIsRenderedInSidebar:!0,...r})})},r=window.wp.data,i=[{label:"px",value:"px"},{label:"%",value:"%"},{label:"vh",value:"vh"}],d=(0,t.withColors)({buttonBackgroundColor:"button-bg-color",buttonTextColor:"button-text-color",fadeColor:"fade-color"})((({attributes:e,setAttributes:l,clientId:d,isSelected:c,fadeColor:p,setFadeColor:u})=>{const x=(0,t.useBlockProps)(),b=(w=d,(0,r.useSelect)((e=>{const o=e(t.store).getSelectedBlockClientId();return e(t.store).getBlockParents(o).includes(w)}),[w]));var w;const h=b||!e.visibleAmount||!e.visibleUnit,m=(0,t.useInnerBlocksProps)({className:"expandable-content"+(h?" is-expanded":""),"data-visible-amount":e.visibleAmount,"data-visible-unit":e.visibleUnit,style:{"--expandable-fade-color":p?.color,...h?{}:{height:`${e.visibleAmount}${e.visibleUnit}`,overflow:"hidden"}}},{template:[["core/paragraph"]]});return(0,s.jsxs)("div",{...x,children:[(0,s.jsx)(a,{label:(0,n.__)("Fade color","wmf-reports"),color:p?.color||e.fadeColor,onColorChange:u,clientId:d}),(0,s.jsx)(t.InspectorControls,{group:"styles",children:(0,s.jsx)(o.PanelBody,{intialOpen:!0,children:(0,s.jsxs)(o.PanelRow,{className:"wmf-expandable-dimensions-panel",children:[(0,s.jsx)(o.TextControl,{label:(0,n.__)("Visible Amount","wmf-reports"),value:e.visibleAmount,onChange:e=>{isNaN(+e)||l({visibleAmount:+e})}}),(0,s.jsx)(o.SelectControl,{label:(0,n.__)("Unit","wmf-reports"),options:i,value:e.visibleUnit||i[0].value,onChange:e=>l({visibleUnit:e})})]})})}),(0,s.jsx)("div",{...m}),!b&&(0,s.jsx)(t.RichText,{tagName:"div",className:"expandable-expander",value:e.showMoreText,placeholder:"Show more",onChange:e=>l({showMoreText:e}),withoutInteractiveFormatting:!0,allowedFormats:[]}),(c||b)&&(0,s.jsx)(t.RichText,{tagName:"div",className:"expandable-expander is-expanded-in-editor",value:e.showLessText,placeholder:"Show less",onChange:e=>l({showLessText:e}),withoutInteractiveFormatting:!0,allowedFormats:[]})]})})),c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"wmf-reports/expandable","title":"Expandable","description":"Show a teaser of some content, with a link to expand to see the full content.","category":"widgets","icon":"editor-expand","example":{},"attributes":{"buttonBackgroundColor":{"type":"string"},"buttonTextColor":{"type":"string"},"fadeColor":{"type":"string","default":"#fff"},"showMoreText":{"type":"string","default":"Show more"},"showLessText":{"type":"string","default":"Show less"},"visibleAmount":{"type":"number","default":300},"visibleUnit":{"enum":["px","%","vh"],"default":"px"}},"supports":{"html":false},"textdomain":"wmf-reports","editorScript":"file:./index.js","style":"file:./index.css","viewScript":"file:./view.js","keywords":["annual","report","expandable","accordion"]}');(0,e.registerBlockType)(c.name,{...c,edit:d,save:function({attributes:e}){const o=t.useBlockProps.save();return(0,s.jsxs)("div",{...o,style:{"--expandable-fade-color":`var(--wp--preset--color--${e.fadeColor})`},children:[(0,s.jsx)("div",{className:"expandable-content","data-visible-amount":e.visibleAmount,"data-visible-unit":e.visibleUnit,children:(0,s.jsx)(t.InnerBlocks.Content,{})}),(0,s.jsx)("button",{className:"expandable-expander",type:"button","data-showmoretext":e.showMoreText,"data-showlesstext":e.showLessText,children:e.showMoreText})]})},transforms:{from:[{type:"block",blocks:["core/group"],transform:(t,o)=>(0,e.createBlock)(c.name,t,o)}]}})})();