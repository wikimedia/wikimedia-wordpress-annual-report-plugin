(()=>{"use strict";const e=window.wp.blocks,t=window.React,o=window.wp.blockEditor,n=window.wp.components,a=window.wp.i18n,s=window.wp.data,l=[{label:"px",value:"px"},{label:"%",value:"%"},{label:"vh",value:"vh"}],i=(0,o.withColors)({buttonBackgroundColor:"button-bg-color",buttonTextColor:"button-text-color"})((({attributes:e,setAttributes:i,clientId:r,isSelected:c})=>{const d=(0,o.useBlockProps)(),p=(m=r,(0,s.useSelect)((e=>{const t=e(o.store).getSelectedBlockClientId();return e(o.store).getBlockParents(t).includes(m)}),[m]));var m;const u=p||!e.visibleAmount||!e.visibleUnit,b=(0,o.useInnerBlocksProps)({className:"expandable-content"+(u?" is-expanded":""),"data-visible-amount":e.visibleAmount,"data-visible-unit":e.visibleUnit,style:{...u?{}:{height:`${e.visibleAmount}${e.visibleUnit}`,overflow:"hidden"}}},{template:[["core/paragraph"]]});return(0,t.createElement)("div",{...d},(0,t.createElement)(o.InspectorControls,{group:"styles"},(0,t.createElement)(n.PanelBody,{intialOpen:!0},(0,t.createElement)(n.PanelRow,{className:"wmf-expandable-dimensions-panel"},(0,t.createElement)(n.TextControl,{label:(0,a.__)("Visible Amount","wmf-reports"),value:e.visibleAmount,onChange:e=>{isNaN(+e)||i({visibleAmount:+e})}}),(0,t.createElement)(n.SelectControl,{label:(0,a.__)("Unit","wmf-reports"),options:l,value:e.visibleUnit||l[0].value,onChange:e=>i({visibleUnit:e})})))),(0,t.createElement)("div",{...b}),!p&&(0,t.createElement)(o.RichText,{tagName:"div",className:"expandable-expander",value:e.showMoreText,placeholder:"Show more",onChange:e=>i({showMoreText:e}),withoutInteractiveFormatting:!0,allowedFormats:[]}),(c||p)&&(0,t.createElement)(o.RichText,{tagName:"div",className:"expandable-expander is-expanded-in-editor",value:e.showLessText,placeholder:"Show less",onChange:e=>i({showLessText:e}),withoutInteractiveFormatting:!0,allowedFormats:[]}))})),r=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"wmf-reports/expandable","title":"Expandable","description":"Show a teaser of some content, with a link to expand to see the full content.","category":"widgets","icon":"editor-expand","example":{},"attributes":{"buttonBackgroundColor":{"type":"string"},"buttonTextColor":{"type":"string"},"showMoreText":{"type":"string","default":"Show more"},"showLessText":{"type":"string","default":"Show less"},"visibleAmount":{"type":"number","default":300},"visibleUnit":{"enum":["px","%","vh"],"default":"px"}},"supports":{"html":false},"textdomain":"wmf-reports","editorScript":"file:./index.js","style":"file:./index.css","viewScript":"file:./view.js","keywords":["annual","report","expandable","accordion"]}');(0,e.registerBlockType)(r.name,{...r,edit:i,save:function({attributes:e}){const n=o.useBlockProps.save();return(0,t.createElement)("div",{...n},(0,t.createElement)("div",{className:"expandable-content","data-visible-amount":e.visibleAmount,"data-visible-unit":e.visibleUnit},(0,t.createElement)(o.InnerBlocks.Content,null)),(0,t.createElement)("button",{className:"expandable-expander",type:"button","data-showmoretext":e.showMoreText,"data-showlesstext":e.showLessText},e.showMoreText))},transforms:{from:[{type:"block",blocks:["core/group"],transform:(t,o)=>(0,e.createBlock)(r.name,t,o)}]}})})();