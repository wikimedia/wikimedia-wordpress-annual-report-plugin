(()=>{var e={694:(e,t,r)=>{"use strict";var n=r(925);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,a,l){if(l!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},556:(e,t,r)=>{e.exports=r(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},942:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=l(e,a(r)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=l(t,r));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.blocks,n=window.wp.i18n,o=window.wp.blockEditor,a=window.wp.data,l=window.wp.element;var s=r(556),i=r.n(s);function c({className:t,allowedBlocks:r,template:n,currentItemIndex:a,parentBlockId:l,renderAppender:s,captureToolbars:i}){const c=(0,e.useRef)(),d=(0,o.useInnerBlocksProps)({id:`inner-block-display-single-${l}`,className:t},{__experimentalCaptureToolbars:i,allowedBlocks:r,orientation:"horizontal",renderAppender:s,template:n,templateLock:!1});return(0,e.useEffect)((()=>{c.current&&(c.current.innerHTML=`#inner-block-display-single-${l} > *:not(:nth-child(${a+1}) ) { display: none; }`)}),[a,c,l]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("style",{ref:c}),(0,e.createElement)("div",{...d}))}c.defaultProps={currentItemIndex:0,renderAppender:!1,captureToolbars:!0},c.propTypes={parentBlockId:i().string.isRequired,allowedBlocks:i().arrayOf(i().string).isRequired,template:i().array,className:i().string,currentItemIndex:i().number,renderAppender:i().oneOfType([i().bool,i().element])};const d=c;var u=r(942),p=r.n(u);const m=window.wp.components;function g({totalPages:t,currentPage:r,setCurrentPage:n,prevEnabled:o,nextEnabled:a,addSlide:l=(()=>{}),addSlideEnabled:s=!1}){return(0,e.createElement)("div",{className:"inner-block-slider__navigation"},(0,e.createElement)(m.IconButton,{disabled:!o,icon:"arrow-left-alt2",isSecondary:!0,isSmall:!0,onClick:()=>{o&&n(r-1)}}),[...Array(t).keys()].map((t=>(0,e.createElement)(m.Button,{key:t+1,"aria-label":`Slide ${t+1}`,className:p()("components-button","is-not-small",{"is-primary":r===t+1,"is-secondary":r!==t+1}),type:"button",onClick:()=>{n(t+1)}},t+1))),(0,e.createElement)(m.IconButton,{disabled:!a,icon:"arrow-right-alt2",isSecondary:!0,isSmall:!0,onClick:()=>{a&&n(r+1)}}),(0,e.createElement)(m.IconButton,{disabled:!s,icon:"plus-alt2",isSecondary:!0,isSmall:!0,onClick:()=>l()}))}g.propTypes={totalPages:i().number.isRequired,currentPage:i().number.isRequired,setCurrentPage:i().func.isRequired,prevEnabled:i().bool.isRequired,nextEnabled:i().bool.isRequired,addSlide:i().func,addSlideEnabled:i().bool};const f=g,y=JSON.parse('{"UU":"wmf-reports/stories"}');(0,t.registerBlockType)(y.UU,{edit:function({clientId:r}){const s=(0,a.useSelect)((e=>e("core/block-editor").getBlock(r).innerBlocks)),{insertBlock:i,selectBlock:c,updateBlockAttributes:u}=(0,a.useDispatch)("core/block-editor"),p=(0,l.useRef)(s.length),[m,g]=(0,l.useState)(0),[y,b]=(0,l.useState)(0);(0,l.useEffect)((()=>{const e=document.getElementsByClassName("stories__categories-wrapper")?.[0],t=document.getElementsByClassName("stories__categories")?.[0],r=document.querySelector(".category-slide.active"),n=document.querySelector(".category-slide:last-child"),o=t.style.marginLeft||0,a=e?.getBoundingClientRect(),l=r?.getBoundingClientRect(),s=n?.getBoundingClientRect();if(0!==m)if(s.right<a.right)b(0);else if(m!==p.current-1){if(m>0&&m<p.current-1){const e=document.querySelector(".category-slide:first-child"),t=l.right-l.left,r=l.left-parseInt(o),n=(a.right-a.left)/2,i=a.right-n-r+t/2,c=e?.getBoundingClientRect();if(c.left-parseInt(o)+i>a.left)return void b(0);const d=s.right-parseInt(o);if(d+i<a.right)return void b(a.right-d);b(i)}}else{const e=l.right-l.left,t=l.left-parseInt(o),r=a.right-(t+e);b(r)}else b(0)}),[m]),(0,l.useEffect)((()=>{(s.length>p.current||s.length<p.current&&m+1>s.length)&&g(s.length-1),p.current=s.length}),[s.length,m,p,s]);const h=(0,o.useBlockProps)({className:"stories carousel"});return(0,e.createElement)("div",{...h},(0,e.createElement)("div",{className:"stories__categories-wrapper alignwide"},(0,e.createElement)("div",{className:"stories__categories",style:{marginLeft:y}},s.map(((t,a)=>{const{attributes:l,clientId:s}=t,{category:i}=l;return(0,e.createElement)(o.RichText,{className:"category-slide "+(a===m?"active":""),key:s,placeholder:(0,n.__)("Category Name","wmf-reports"),tagName:"div",value:i,onChange:e=>{u(s,{category:e})},onClick:()=>{g(a),c(r)}})})))),(0,e.createElement)("div",{className:"inner-block-slider"},(0,e.createElement)(d,{allowedBlocks:["wmf-reports/story"],className:"slides",currentItemIndex:m,parentBlockId:r,template:["wmf-reports/story"]}),(0,e.createElement)("p",{className:"help"},(0,n.__)("Click on the + below to add a slide. You can associate a slide with a post after it has been inserted.","wmf-reports")),(0,e.createElement)(f,{addSlide:()=>{const e=Date.now(),n=(0,t.createBlock)("wmf-reports/story",{id:e});i(n,void 0,r)},addSlideEnabled:!0,currentPage:m+1,nextEnabled:m+1<s.length,prevEnabled:m+1>1,setCurrentPage:e=>{g(e-1)},totalPages:s.length})))},save:()=>(0,e.createElement)(o.InnerBlocks.Content,null)})})()})();