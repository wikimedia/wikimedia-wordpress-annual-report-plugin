(()=>{const e=document.getElementsByClassName("wp-block-wmf-reports-story"),t=document.getElementsByClassName("category-slide"),i=document.getElementById("carousel-back"),s=document.getElementById("carousel-forward"),l=e.length,o=e=>{const t=document.getElementsByClassName("stories__categories")?.[0];t.style.marginLeft=e+"px"};let n=!1;const a=i=>{const s=document.querySelector(".category-slide.active"),a=parseInt(s?.dataset?.index||0),r=e[i],y=Array.from(t).filter((e=>e.dataset.id===r.id));Array.from(t).forEach((e=>{e.classList.remove("active")})),y.forEach((e=>{e.classList.add("active")})),Array.from(e).forEach(((e,t)=>{if(!n&&t!==i){if(t===a&&a!==i)return i>=a?(r.style.height=null,r.style.opacity=0,e.style.opacity=1,e.style.position="absolute",e.style.zIndex=1,e.classList.add("animate"),setTimeout((()=>{e.style.height=r.offsetHeight,e.style.opacity=0,n=!0}),1),setTimeout((()=>{e.style.height=0,e.style.opacity=null,e.style.position=null,e.style.visibility="hidden",e.style.zIndex=null,e.classList.remove("animate"),n=!1}),250),r.style.height=null,r.style.opacity=null,void(r.style.visibility="visible")):i<a?(r.style.height=null,r.style.opacity=0,r.style.position="absolute",r.style.visibility="visible",e.style.height=null,e.style.opacity=1,e.style.visibility="visible",setTimeout((()=>{r.classList.add("animate"),e.classList.add("animate")}),1),setTimeout((()=>{r.style.opacity=1,e.style.height=r.offsetHeight+"px",n=!0}),2),void setTimeout((()=>{r.style.height=null,r.style.opacity=null,r.style.position=null,r.style.visibility="visible",r.classList.remove("animate"),e.style.height=0,e.style.opacity=null,e.style.visibility="hidden",e.classList.remove("animate"),n=!1}),250)):void 0;e.style.height=0,e.style.visibility="hidden"}})),(e=>{const t=document.getElementsByClassName("stories__categories-wrapper")?.[0],i=document.getElementsByClassName("stories__categories")?.[0],s=document.querySelector(".category-slide.active"),n=document.querySelector(".category-slide:last-child"),a=i.style.marginLeft||0,r=t?.getBoundingClientRect(),y=s?.getBoundingClientRect(),c=n?.getBoundingClientRect();if(0!==e)if(c.right<r.right)o(0);else if(e!==l-1){if(e>0&&e<l-1){const e=document.querySelector(".category-slide:first-child"),t=y.right-y.left,i=y.left-parseInt(a),s=(r.right-r.left)/2,l=r.right-s-i+t/2,n=e?.getBoundingClientRect();if(n.left-parseInt(a)+l>r.left)return void o(0);const d=c.right-parseInt(a);if(d+l<r.right)return void o(r.right-d);o(l)}}else{const e=y.right-y.left,t=y.left-parseInt(a),i=r.right-(t+e);o(i)}else o(0)})(i)};a(0),Array.from(t).forEach(((e,t)=>{e.addEventListener("click",(()=>{a(t)}))})),i.addEventListener("click",(()=>{const t=Array.from(e).findIndex((e=>"visible"===e.style.visibility)),i=t-1<0?e.length-1:t-1;a(i)})),s.addEventListener("click",(()=>{let t=Array.from(e).findIndex((e=>"visible"===e.style.visibility));t<0&&(t=0);const i=t+1>e.length-1?0:t+1;a(i)}))})();