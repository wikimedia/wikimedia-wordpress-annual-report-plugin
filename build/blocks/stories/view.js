(()=>{const e=document.getElementsByClassName("wp-block-wmf-reports-story"),t=document.getElementsByClassName("category-slide"),i=document.getElementById("carousel-back"),s=document.getElementById("carousel-forward"),l=document.getElementById("carousel-slide-back"),o=document.getElementById("carousel-slide-forward"),n=e.length,a=document.getElementsByClassName("stories__categories")?.[0],c=e=>{a.style.marginLeft=e+"px"};let r=!1,y=0,d=0;const u=i=>{const s=document.querySelector(".category-slide.active"),l=parseInt(s?.dataset?.index||0),o=e[i],y=Array.from(t).filter((e=>e.dataset.id===o.id));Array.from(t).forEach((e=>{e.classList.remove("active")})),y.forEach((e=>{e.classList.add("active")})),Array.from(e).forEach(((e,t)=>{if(!r&&t!==i){if(t===l&&l!==i)return i>=l?(o.style.height=null,o.style.opacity=0,e.style.opacity=1,e.style.position="absolute",e.style.zIndex=1,e.classList.add("animate"),setTimeout((()=>{e.style.height=o.offsetHeight,e.style.opacity=0,r=!0}),1),setTimeout((()=>{e.style.height=0,e.style.opacity=null,e.style.position=null,e.style.visibility="hidden",e.style.zIndex=null,e.classList.remove("animate"),r=!1}),250),o.style.height=null,o.style.opacity=null,void(o.style.visibility="visible")):i<l?(o.style.height=null,o.style.opacity=0,o.style.position="absolute",o.style.visibility="visible",e.style.height=null,e.style.opacity=1,e.style.visibility="visible",setTimeout((()=>{o.classList.add("animate"),e.classList.add("animate")}),1),setTimeout((()=>{o.style.opacity=1,e.style.height=o.offsetHeight+"px",r=!0}),2),setTimeout((()=>{e.style.opacity=0}),250),void setTimeout((()=>{o.style.height=null,o.style.opacity=null,o.style.position=null,o.style.visibility="visible",o.classList.remove("animate"),e.style.height=0,e.style.opacity=null,e.style.visibility="hidden",e.classList.remove("animate"),r=!1}),250)):void 0;e.style.height=0,e.style.visibility="hidden"}})),(e=>{const t=document.getElementsByClassName("stories__categories-wrapper")?.[0],i=document.querySelector(".category-slide.active"),s=document.querySelector(".category-slide:last-child"),l=parseInt(a.style.marginLeft)||0,o=t?.getBoundingClientRect(),r=i?.getBoundingClientRect(),y=s?.getBoundingClientRect();if(y.right-l<o.right)return c(0),void(document.querySelector(".stories__categories-buttons").style.display="none");if(0!==e)if(e!==n-1){if(e>0&&e<n-1){const e=document.querySelector(".category-slide:first-child"),t=r.right-r.left,i=r.left-l,s=(o.right-o.left)/2,n=o.right-s-i+t/2,a=e?.getBoundingClientRect();if(a.left-l+n>o.left)return void c(0);const d=y.right-l;if(d+n<o.right)return void c(o.right-d);c(n)}}else{const e=r.right-r.left,t=r.left-l,i=o.right-(t+e);c(i)}else c(0)})(i)};u(0),Array.from(t).forEach(((e,t)=>{e.addEventListener("click",(()=>{u(t)}))})),[l,i].forEach((t=>{t.addEventListener("click",(()=>{const t=Array.from(e).findIndex((e=>"visible"===e.style.visibility)),i=t-1<0?e.length-1:t-1;u(i)}))})),[o,s].forEach((t=>{t.addEventListener("click",(()=>{let t=Array.from(e).findIndex((e=>"visible"===e.style.visibility));t<0&&(t=0);const i=t+1>e.length-1?0:t+1;u(i)}))})),a.addEventListener("touchstart",(e=>{y=e.changedTouches[0].screenX})),a.addEventListener("touchend",(e=>{d=e.changedTouches[0].screenX,d<y&&s.click(),d>y&&i.click()}))})();