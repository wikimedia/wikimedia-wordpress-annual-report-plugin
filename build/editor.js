(()=>{"use strict";const e=window.wp.blocks,t=window.wp.compose,o=window.wp.blockEditor,r=window.wp.components,i=window.wp.hooks,l=window.wp.i18n,n=window.ReactJSXRuntime,s=(0,t.createHigherOrderComponent)((e=>t=>{if(!t.isSelected||"core/group"!==t.name)return(0,n.jsx)(e,{...t},"edit");const{attributes:i,setAttributes:s}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e,{...t},"edit"),(0,n.jsx)(o.InspectorControls,{children:(0,n.jsxs)(r.PanelBody,{title:(0,l.__)("Report group settings","wmf-reports"),initialOpen:!0,children:[(0,n.jsx)(r.ToggleControl,{label:(0,l.__)("Include in Report Table of Contents","wmf-reports"),checked:i.includeInToC,onChange:e=>{s({includeInToC:e})}}),i.includeInToC&&(0,n.jsx)(r.TextControl,{label:(0,l.__)("Table of Contents Label","wmf-reports"),value:i.tocLabel,onChange:e=>{const t=e.toLowerCase().replace(/[^a-z0-9]/g," ").trim().split(/\s+/).join("-");s({tocSlug:t?`toc-${t}`:"",tocLabel:e})}}),(0,n.jsx)(r.ToggleControl,{label:(0,l.__)("Fill viewport height","wmf-reports"),checked:i.fullViewportHeight,onChange:e=>{s({fullViewportHeight:e})},help:(0,l.__)("Makes this group take up at minimum a full viewport of vertical space","wmf-reports")})]})})]})}),"withCustomGroupControls");(0,i.addFilter)("editor.BlockEdit","wmf-reports/add-group-block-controls",s);const a=(0,t.createHigherOrderComponent)((e=>t=>{if("core/group"!==t.name||!t.attributes.fullViewportHeight)return(0,n.jsx)(e,{...t});const o=`${t.className||""} wp-block-group-is-full-viewport-height`;return(0,n.jsx)(e,{...t,className:o})}),"withFillViewportHeightStyle");(0,i.addFilter)("editor.BlockListBlock","wmf-reports/block-list-block/group-block",a,100),(0,i.addFilter)("blocks.registerBlockType","wmf-reports/custom-attributes/group-block",(function(t,o){return"core/group"!==o?t:{...t,attributes:{...t.attributes,includeInToC:{type:"boolean",default:!1},tocLabel:{type:"string"},tocSlug:{type:"string"},fullViewportHeight:{type:"boolean",default:!1}},transforms:{...t.transforms,from:[{type:"block",blocks:["wmf-reports/expandable"],transform:(t,o)=>(0,e.createBlock)("core/group",t,o)},...t.transforms.from]}}}));const c=window.wp.richText,p="wmf-reports/count-up";(0,c.registerFormatType)(p,{title:"Count-up Number",tagName:"span",className:"wmf-countup",edit:({isActive:e,onChange:t,value:r})=>(0,n.jsx)(o.RichTextToolbarButton,{icon:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16",children:[(0,n.jsx)("text",{x:"1",y:"7.5",fontSize:"8",transform:"scale(1 1.75)",children:"0"}),(0,n.jsx)("text",{x:"10",y:"7.5",fontSize:"8",transform:"scale(1 1.75)",children:"9"}),(0,n.jsx)("path",{strokeWidth:"1.5",markerEnd:"url(#a)",d:"M6 8.5h1"}),(0,n.jsx)("defs",{children:(0,n.jsx)("marker",{id:"a",markerHeight:"4.5",markerWidth:"2",orient:"auto",refX:"0",refY:"1.75",children:(0,n.jsx)("path",{d:"m0 0 2 1.75L0 3.5z"})})})]}),title:(0,l.__)("Count-up Number","wmf-reports"),onClick:()=>{t((0,c.toggleFormat)(r,{type:p}))},isActive:e})}),(0,e.registerBlockCollection)("wikimedia-annual-report",{title:"Annual Report",icon:"chart-bar"})})();