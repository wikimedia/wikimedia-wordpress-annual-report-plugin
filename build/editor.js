(()=>{"use strict";const e=window.wp.blocks,t=window.React,o=window.wp.compose,r=window.wp.blockEditor,l=window.wp.components,n=window.wp.hooks,i=window.wp.i18n,c=(0,o.createHigherOrderComponent)((e=>o=>{if(!o.isSelected||"core/group"!==o.name)return(0,t.createElement)(e,{key:"edit",...o});const{attributes:n,setAttributes:c}=o;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e,{key:"edit",...o}),(0,t.createElement)(r.InspectorControls,null,(0,t.createElement)(l.PanelBody,{title:(0,i.__)("Report group settings","wmf-reports"),initialOpen:!0},(0,t.createElement)(l.ToggleControl,{label:(0,i.__)("Include in Report Table of Contents","wmf-reports"),checked:n.includeInToC,onChange:e=>{c({includeInToC:e})}}),n.includeInToC&&(0,t.createElement)(l.TextControl,{label:(0,i.__)("Table of Contents Label","wmf-reports"),value:n.tocLabel,onChange:e=>{const t=e.toLowerCase().replace(/[^a-z0-9]/g," ").trim().split(/\s+/).join("-");c({tocSlug:`toc-${t}`,tocLabel:e})}}),(0,t.createElement)(l.ToggleControl,{label:(0,i.__)("Fill viewport height","wmf-reports"),checked:n.fullViewportHeight,onChange:e=>{c({fullViewportHeight:e})},help:(0,i.__)("Makes this group take up at minimum a full viewport of vertical space","wmf-reports")}))))}),"withCustomGroupControls");(0,n.addFilter)("editor.BlockEdit","wmf-reports/add-group-block-controls",c);const a=(0,o.createHigherOrderComponent)((e=>o=>{if("core/group"!==o.name||!o.attributes.fullViewportHeight)return(0,t.createElement)(e,{...o});const r=`${o.className||""} wp-block-group-is-full-viewport-height`;return(0,t.createElement)(e,{...o,className:r})}),"withFillViewportHeightStyle");(0,n.addFilter)("editor.BlockListBlock","wmf-reports/block-list-block/group-block",a,100),(0,n.addFilter)("blocks.registerBlockType","wmf-reports/custom-attributes/group-block",(function(t,o){return"core/group"!==o?t:{...t,attributes:{...t.attributes,includeInToC:{type:"boolean",default:!1},tocLabel:{type:"string"},tocSlug:{type:"string"},fullViewportHeight:{type:"boolean",default:!1}},transforms:{...t.transforms,from:[{type:"block",blocks:["wmf-reports/expandable"],transform:(t,o)=>(0,e.createBlock)("core/group",t,o)},...t.transforms.from]}}})),(0,e.registerBlockCollection)("wikimedia-annual-report",{title:"Annual Report",icon:"chart-bar"})})();